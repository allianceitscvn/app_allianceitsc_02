(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[151],{1163:function(e,t,a){"use strict";a.r(t);var n,s=a(32),i=a(4),c=a(16),o=a(17),r=a(18),l=a(19),d=a(22),m=a(0),u=a.n(m),h=a(20),j=a(1),b=a(88),p=a(809),f=a(507),v=a(87),O=a(2),x=h.b.div(n||(n=Object(d.a)(["\n  & .a-box-template {\n    color: #000;\n    border: 1px solid #d9d9d9;\n    margin-bottom: 1rem;\n    & .form-control {\n      padding: 0;\n      border: none;\n    }\n  }\n  & .form-title {\n    background: #f0f3f5;\n    padding: 0.5rem 0.5rem;\n    border-bottom: 1px solid #d9d9d9;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    & h5 {\n      color: #000;\n      font-weight: bold;\n      margin-bottom: 0;\n    }\n    & button {\n      font-size: 16px;\n    }\n  }\n  & .form-input {\n    color: #000;\n    padding: 1rem;\n  }\n  & .a-box-sender {\n    border: 1px solid #d9d9d9;\n    margin-bottom: 1rem;\n    & .sender-email {\n      color: #000;\n      padding: 1rem;\n    }\n    & label {\n      margin-bottom: 0;\n    }\n  }\n  & .a-row {\n    display: flex;\n    align-items: center;\n    margin-bottom: 0.5rem;\n    > :first-child {\n      width: 170px;\n    }\n    > :last-child {\n      flex: 1;\n    }\n  }\n\n  & .a-box-preview {\n    border: 1px solid #d9d9d9;\n    margin-bottom: 1rem;\n  }\n\n  & .form-preview {\n    padding: 1rem;\n  }\n  & .a-row-preview {\n    display: flex;\n    align-items: center;\n    margin-bottom: 0.5rem;\n    border-bottom: 1px solid #d9d9d9;\n    color: #000;\n    > :first-child {\n      width: 70px;\n    }\n    > :last-child {\n      font-weight: bold;\n      flex: 1;\n    }\n  }\n  & .message-body {\n    color: #000;\n  }\n"]))),g=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getOptionsByKey=function(e){return(n.state.options||{})[e]||[]},n.requestOptions=function(){Object(b.a)({request:{method:"POST",path:"EmailQueue",name:"Options"},data:{},successCallBack:function(e){e.Data&&n.setState({options:e.Data},(function(){var e=n.state,t=e.account,a=e.template;t&&a&&n.requestLoadTemplate(t.Value,a.Value)}))},errorCallBack:function(e,t){var a=t.AB.dd.cc("A");console.log(a)}})},n.requestLoadTemplate=function(e,t){Object(b.a)({request:{method:"POST",path:"EmailQueue",name:"LoadFromTemplate"},data:{AccountId:e,TemplateId:t},successCallBack:function(e){if(e.Data){var t=e.Data,a={Sender:t.Sender,Recipient:t.Recipient,Subject:t.Subject};for(var s in e.Data.TemplateKeys){a[s.replace(/[^\w\s]/gi,"")]=e.Data.TemplateKeys[s]}n.setState({data:e.Data,formInput:a},(function(){console.log(n.state.formInput)}))}},errorCallBack:function(e,t){}})},n.requestAdd=function(e,t,a,s,c){n.setState({showLoadingSend:!0}),Object(b.a)({request:{method:"POST",path:"EmailQueue",name:"Add"},data:Object(i.a)(Object(i.a)({},e),{},{Sender:t,Recipient:a,Subject:s,MessageBody:c}),successCallBack:function(e){setTimeout((function(){n.setState({showLoadingSend:!1,showPreview:!1})}),1e3),e.Data},errorCallBack:function(e,t){setTimeout((function(){n.setState({showLoadingSend:!1})}),1e3)}})},n.onHandleChangeSelect=function(e,t){n.setState(Object(s.a)({},t,e),(function(){var e=n.state,t=e.account,a=e.template;t&&a&&n.requestLoadTemplate(t.Value,a.Value)}))},n.renderFieldInformation=function(){var e=n.state.data.TemplateKeys,t=[];for(var a in e){var s=a.replace(/[^\w\s]/gi,"");t.push(Object(O.jsxs)("div",{className:"a-row",children:[Object(O.jsx)(p.a,{for:"emailSendTo",children:a}),Object(O.jsx)(f.a,{id:"emailSendTo",name:s,placeholder:"input ".concat(a),type:"text",onChange:n.onhandleChangeInfo,value:n.state.formInput[s]})]}))}return t},n.onhandleChangeInfo=function(e){var t=e.target,a=t.name,c=t.value;n.setState({formInput:Object(i.a)(Object(i.a)({},n.state.formInput),{},Object(s.a)({},a,c))})},n.state={options:null,account:null,template:null,data:null,formInput:{Sender:"",Recipient:"",Subject:""},showPreview:!1,showLoadingSend:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.requestOptions()}},{key:"render",value:function(){var e,t=this,a=this.state,n=(a.data,a.formInput);return Object(O.jsx)(x,{col:this.props.col,gap:this.props.gap,style:this.props.style,className:this.props.className,children:this.state.showPreview?Object(O.jsxs)("div",{className:"a-box-preview",children:[Object(O.jsxs)("div",{className:"form-title",children:[Object(O.jsx)("h5",{children:"Preview"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(v.a,{color:"primary",className:"mr-2",onClick:function(){t.setState({showPreview:!t.state.showPreview})},disabled:!this.state.data,children:this.state.showPreview?"Hide Preview":"Preview"}),Object(O.jsx)(v.a,{color:"success",onClick:function(e){console.log("submit:",n),t.requestAdd(n,n.Sender,n.Recipient,n.Subject,t.state.data.MessageBody)},children:this.state.showLoadingSend?Object(O.jsx)("i",{className:"fa fa-spinner fa-spin"}):"Send"})]})]}),Object(O.jsxs)("div",{className:"form-preview",children:[Object(O.jsxs)("div",{className:"a-row-preview",children:[Object(O.jsx)("div",{children:"Form:"}),Object(O.jsx)("div",{children:j.HUtils.getTextWithData(n.Sender,Object(i.a)({},n))})]}),Object(O.jsxs)("div",{className:"a-row-preview",children:[Object(O.jsx)("div",{children:"Subject:"}),Object(O.jsx)("div",{children:j.HUtils.getTextWithData(n.Subject,Object(i.a)({},n))})]}),Object(O.jsxs)("div",{className:"a-row-preview",children:[Object(O.jsx)("div",{children:"Sendto:"}),Object(O.jsx)("div",{children:j.HUtils.getTextWithData(n.Recipient,Object(i.a)({},n))})]}),Object(O.jsx)("div",{className:"message-body p-1",children:Object(O.jsx)("div",{dangerouslySetInnerHTML:{__html:j.HUtils.getTextWithData(null===(e=this.state.data)||void 0===e?void 0:e.MessageBody,Object(i.a)({},n))}})})]})]}):Object(O.jsxs)(m.Fragment,{children:[Object(O.jsxs)("div",{className:"a-box-template",children:[Object(O.jsx)("div",{className:"form-title",children:Object(O.jsx)("h5",{children:"Select Template"})}),Object(O.jsxs)("div",{className:"form-input",children:[Object(O.jsxs)("div",{className:"a-row",children:[Object(O.jsx)("div",{children:"Account"}),Object(O.jsx)("div",{children:Object(O.jsx)(j.MyBase,{type:"select2",className:"form-control",value:this.state.account,onChange:function(e){return t.onHandleChangeSelect(e,"account")},attrs:{},fnList:{getSourceData:function(){return t.getOptionsByKey("AccountList")}}})})]}),Object(O.jsxs)("div",{className:"a-row",children:[Object(O.jsx)("div",{children:"Template"}),Object(O.jsx)("div",{children:Object(O.jsx)(j.MyBase,{type:"select2",className:"form-control",value:this.state.template,onChange:function(e){return t.onHandleChangeSelect(e,"template")},attrs:{},fnList:{getSourceData:function(){return t.getOptionsByKey("TemplateList")}}})})]})]})]}),this.state.data?Object(O.jsxs)("div",{className:"a-box-sender",children:[Object(O.jsxs)("div",{className:"form-title",children:[Object(O.jsx)("h5",{children:"Fill Information"}),Object(O.jsx)("div",{children:Object(O.jsx)(v.a,{color:"primary",className:"mr-2",onClick:function(){t.setState({showPreview:!t.state.showPreview})},disabled:!this.state.data,children:this.state.showPreview?"Hide Preview":"Preview"})})]}),Object(O.jsxs)("div",{className:"form-input",children:[Object(O.jsxs)("div",{className:"a-row",children:[Object(O.jsx)(p.a,{for:"emailSubject",children:"Subject"}),Object(O.jsx)(f.a,{id:"emailSubject",name:"Subject",placeholder:"input subject",type:"text",value:n.Subject,onChange:this.onhandleChangeInfo})]}),Object(O.jsxs)("div",{className:"a-row",children:[Object(O.jsx)(p.a,{for:"emailSendTo",children:"Send to"}),Object(O.jsx)(f.a,{id:"emailSendTo",name:"Recipient",placeholder:"input reciver",type:"text",value:n.Recipient,onChange:this.onhandleChangeInfo})]}),this.renderFieldInformation()]})]}):""]})})}}]),a}(u.a.Component);t.default=g},809:function(e,t,a){"use strict";var n=a(8),s=a(15),i=a(0),c=a.n(i),o=a(5),r=a.n(o),l=a(23),d=a.n(l),m=a(7),u=["className","cssModule","hidden","widths","tag","check","size","for"],h=r.a.oneOfType([r.a.number,r.a.string]),j=r.a.oneOfType([r.a.bool,r.a.string,r.a.number,r.a.shape({size:h,order:h,offset:h})]),b={children:r.a.node,hidden:r.a.bool,check:r.a.bool,size:r.a.string,for:r.a.string,tag:m.q,className:r.a.string,cssModule:r.a.object,xs:j,sm:j,md:j,lg:j,xl:j,widths:r.a.array},p={tag:"label",widths:["xs","sm","md","lg","xl"]},f=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},v=function(e){var t=e.className,a=e.cssModule,i=e.hidden,o=e.widths,r=e.tag,l=e.check,h=e.size,j=e.for,b=Object(s.a)(e,u),p=[];o.forEach((function(t,n){var s=e[t];if(delete b[t],s||""===s){var i,c=!n;if(Object(m.k)(s)){var o,r=c?"-":"-"+t+"-";i=f(c,t,s.size),p.push(Object(m.m)(d()(((o={})[i]=s.size||""===s.size,o["order"+r+s.order]=s.order||0===s.order,o["offset"+r+s.offset]=s.offset||0===s.offset,o))),a)}else i=f(c,t,s),p.push(i)}}));var v=Object(m.m)(d()(t,!!i&&"sr-only",!!l&&"form-check-label",!!h&&"col-form-label-"+h,p,!!p.length&&"col-form-label"),a);return c.a.createElement(r,Object(n.a)({htmlFor:j},b,{className:v}))};v.propTypes=b,v.defaultProps=p,t.a=v}}]);
//# sourceMappingURL=151.595a8c77.chunk.js.map