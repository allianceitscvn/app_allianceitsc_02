(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[44],{1212:function(e,t,n){"use strict";n.r(t);var o=n(4),a=n(16),c=n(17),r=n(18),i=n(19),s=(n(0),n(87)),u=n(10),p=n(530),l=n(767),f=n(9),h=n(522),d=n(1),g=n(6),j=n(58),b=n(622),O=n(25),v=n(2),m=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var c=arguments.length,r=new Array(c),i=0;i<c;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._cDropzone=null,e._requestApiAfterSuccess=function(t){var n=e.props,a=n.oneButton,c=n.fnList;if(a._moreObj[h.b.apiUrlAfter]&&t&&t.Data&&t.Data.Photos&&t.Data.Photos.length>0){a.changeIsLoading(!0);var r=[];for(var i in t.Data.Photos){var s=t.Data.Photos[i];r.push(s.Id)}var p={ScreenCode:f.j.fnGetScreenCode(c),UploadedFileIds:r};Object(j.a)({method:"POST",url:"/api/v1/".concat(a._moreObj[h.b.apiUrlAfter]),data:a.getApiQuery(Object(o.a)(Object(o.a)({},f.j.fnGetSharedRequestData(c)),p))}).then((function(t){console.warn("res",t),u.i.parseResponseButtonApi(t,a._moreObj),e.parseResponseWhenSuccess(t),a.changeIsLoading(!1)})).catch((function(e){a.changeIsLoading(!1)}))}else u.i.parseResponseButtonApi(t,a._moreObj),e.parseResponseWhenSuccess(t),a.changeIsLoading(!1)},e._requestUpload=function(t){var n=e.props,a=n.oneButton,c=n.fnList;console.log("upload files",t),a.changeIsLoading(!0);var r=Object(o.a)({ScreenCode:f.j.fnGetScreenCode(c)},a.getApiQuery(Object(o.a)({},f.j.fnGetSharedRequestData(c))));Object(b.a)(Object(o.a)(Object(o.a)({},a.getApiRequest()),{},{method:"UPLOAD",files:t,timeout:0,customHeader:r})).then((function(t){console.warn("r:",t),e._requestApiAfterSuccess(t)})).catch((function(e){console.warn("err:",e),a.changeIsLoading(!1)}))},e._getAccept=function(){return e.props.oneButton._moreObj[h.b.acceptType]||d.HCF.getCF(g.c.fileUploadSupport)},e._onDropZone=function(t,n){null!=n&&n.length>0&&null!=t&&0==t.length&&f.n.fnshowDialog({title:O.a.t("Notice"),msg:"".concat(O.a.t("File not supported")).concat(e._getAccept())}),null!=t&&t.length>0&&e._requestUpload(t)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.oneButton;return Object(v.jsxs)(s.a,Object(o.a)(Object(o.a)(Object(o.a)({},this.getMorePropsButton()),t.getMorePropsButton()),{},{onClick:function(){null!=e._cDropzone&&e._cDropzone.open()},children:[t.getTitleDisplay(),Object(v.jsx)(l.a,{ref:function(t){e._cDropzone=t},accept:this._getAccept(),onDrop:this._onDropZone,children:function(e){var t=e.getRootProps,n=e.getInputProps,a=e.isDragActive;e.open;return Object(v.jsx)("div",Object(o.a)(Object(o.a)({},t()),{},{className:"dropzone ".concat(a?"dropzone--isActive":""),children:Object(v.jsx)("input",Object(o.a)({},n()))}))}})]}))}}]),n}(p.a);t.default=m},522:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var o=n(4),a=n(88),c=n(9),r=n(1),i={apiCheckShowModal:"apiCheckShowModal",acceptType:"acceptType",apiUrlAfter:"apiUrlAfter",title:"title",tooltip:"tooltip"},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.oneButton,n=e.fnList,s=e.customQuery,u=e.cb;if(t){var p=t._moreObj[i.apiCheckShowModal];if(p){t.changeIsLoading(!0);var l={method:"POST",url:p.url,path:p.path,name:p.name};Object(a.a)({request:l,data:t.getApiQuery(Object(o.a)(Object(o.a)({},c.j.fnGetSharedRequestData(n)),s)),successCallBack:function(e){console.warn("response",e);var n=r.HUtils.get(e,"Data.Config");n&&n.IsShow?u&&u({result:!0,data:n.FormData||{}}):u&&u({result:!1}),t.changeIsLoading(!1)},errorCallBack:function(e,n){t.changeIsLoading(!1),u&&u({result:!1})}})}else u&&u({result:!0})}else u&&u({result:!0})}},530:function(e,t,n){"use strict";var o=n(4),a=n(16),c=n(17),r=n(48),i=n(18),s=n(19),u=n(0),p=n.n(u),l=n(87),f=n(522),h=n(9),d=n(2),g=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onClick=function(){},o.parseResponseWhenSuccess=function(e){var t=o.props,n=t.oneButton,a=t.fnList;n._configButton.NeedReload?h.j.fnReloadPage(a):n._configButton.NeedReloadList&&h.j.fnReloadList(a)},o.getMorePropsButton=function(){var e=o.props.oneButton,t={};return e&&e._moreObj&&e._moreObj[f.b.title]&&(t.title=e._moreObj[f.b.title]),t},o.checkConfirmMsg=function(e){var t=o.props.oneButton;t&&t._configButton.ConfirmMsg?h.n.fnshowConfirm({title:"Confirm",msg:t._configButton.ConfirmMsg,onClickOK:function(){e&&e()}}):e&&e()},o.state={},o.props.oneButton.setFromComponent(Object(r.a)(o)),o}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.oneButton;return Object(d.jsx)(l.a,Object(o.a)(Object(o.a)({},t.getMorePropsButton()),{},{onClick:function(){e.onClick()},children:t.getTitleDisplay()}))}}]),n}(p.a.Component);t.a=g},622:function(e,t,n){"use strict";var o=n(52);t.a=o.apiUpload}}]);
//# sourceMappingURL=44.6b7940b7.chunk.js.map