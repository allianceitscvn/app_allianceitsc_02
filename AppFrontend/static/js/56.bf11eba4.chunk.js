(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[56],{1257:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var o,r=n(4),a=n(22),l=n(1),i=(n(0),n(819)),c=n(79),s=n(20),u=n(510),f=n(2),d=s.b.div(o||(o=Object(a.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  & .a-title {\n    text-align: center;\n  }\n  & .progress {\n    & .progress-bar {\n      overflow: visible;\n      // text-shadow: 0.07em 0 #b1b1b1, 0 0.07em #b1b1b1, -0.07em 0 #b1b1b1,\n      //   0 -0.07em #b1b1b1;\n      text-shadow: #000000 0 0 2px, #000000 0 0 1px, #000000 0 0 2px;\n      font-size: 12px;\n    }\n  }\n"])));function b(e){var t=e.cell,n=Object(u.a)({props:e}),o=n.row;if(l.HIs.isObject(t))return Object(f.jsx)("div",{});var a={},s={};n.more&&n.more[c.KMore.configFormat]&&(a=n.more[c.KMore.configFormat]),n.more&&n.more[c.KMore.configProgress]&&(s=n.more[c.KMore.configProgress]);var b=Number(t);s.fPercent&&(b=o[s.fPercent]),a.needMultip&&(b*=100);var p=l.HFormat.format(b,Object(r.a)({type:"number_percent"},a)),m={};s.color&&(m.color=s.color),s.moreProps&&(m=Object(r.a)(Object(r.a)({},m),s.moreProps));var g=null;return s.showTotal&&s.fTotal&&s.fNumber&&(g="".concat(o[s.fNumber]," of ").concat(o[s.fTotal])),Object(f.jsxs)(d,{className:"mct-progress disabled",style:n.styleWrap(),children:[null!=g&&Object(f.jsx)("div",{className:"a-title",children:g}),Object(f.jsx)(i.a,Object(r.a)(Object(r.a)({striped:!0,value:b},m),{},{children:Object(f.jsxs)("span",{children:["\xa0",p]})}))]})}},510:function(e,t,n){"use strict";var o=n(32),r=n(13),a=n(31),l=n(4),i=n(1),c=n(57),s=n.n(c),u=n(0),f=n.n(u),d=n(11),b=n(9),p=n(511),m=n(155),g=n(157),y=n(79),v=n(2),h="fnGetScreenCode",j=function(e){var t=e.oneTableCell,n=Object(l.a)({},t.fnList);return n[b.O]=function(){var e=t.row,o=t.extra,r=t.extra.Type.source,a=b.j.getSourceList(n);if(g.e(r))return g.b(a,r,e,o.Type.sourceField);if(r&&r.startsWith("["))return i.HJson.getObj(r);if(r&&r.startsWith("f")){var l=r.slice(1,r.length);return null!=e[l]&&Array.isArray(e[l])?e[l]:null!=e[r]&&Array.isArray(e[r])?e[r]:[]}return a[r]||[]},n[b.T]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.customMore,o=e.count,r=e.tooltip,a=t.row,l=t.more;return w.renderBadge({more:n||l,row:a,count:o,tooltip:r})},n[b.H]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.customTitle;return m.a.Cell_GetHeaderTitle({extra:t.extra,customTitle:n})},n[b.u]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,o=t.more,r=n;return o&&o.hasOwnProperty(e)&&(r=o[e]),r},n[b.v]=function(){var e=t.row,n=t.extra,o=t.more;return m.a.Cell_GetConfigModal({extra:n,more:o,row:e})},n[b.I]=function(){var e=t.row,n=t.extra,o=t.more,r=t.getValue();if(!1===Object(y.FlowGetCanShow)({extra:n,row:e,more:o}))return!0;return!(!o[y.KMore.hideWhenEmpty]||""!==r&&null!=r&&0!==r)||(!(!o[y.KMore.hideWhenNull]||null!=r)||!!(i.MyTableCellHelpers.ConfigByTypes&&i.MyTableCellHelpers.ConfigByTypes[t.type]&&i.MyTableCellHelpers.ConfigByTypes[t.type].isHide&&i.MyTableCellHelpers.ConfigByTypes[t.type].isHide(t)))},n.onSendMsg=function(e){console.error("missing onSendMsg, need update fnList",e)},n.onReExpand=function(){var e=t.row;i.HUtils.runFuntion(e,"_fnForceUpdateDetail")},t.fnList=n,n},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i.HUtils.runFuntion(e.fnList,h,t)},w={renderBadge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.more,n=void 0===t?{}:t,o=e.row,r=void 0===o?{}:o,a=e.count,l=e.tooltip,c=n.configBadge||n.badge;if(null!=a||c&&!0===c.show){var s=a,u=l;if(c&&c.fCount&&null!=r[c.fCount]&&(s=r[c.fCount]),s)return c&&c.fTooltip&&r[c.fTooltip]&&(u=r[c.fTooltip]),u?Object(v.jsx)(d.k,{overlay:Object(v.jsx)(i.MyUI,{type:"html",html:u}),children:Object(v.jsx)("span",{className:"mct-ui-badge",children:s})}):Object(v.jsx)("span",{className:"mct-ui-badge",children:s})}}},C=n(156),x="fnRequestUpdate",M="fnRequestCustom";function F(e){var t=e.ctc,n=e.more,o=t.row.Id,r=O(t),a={};n&&(n.fID&&t.row[n.fID]&&(o=t.row[n.fID]),a=n.configFile||n.file||{});var c=Object(l.a)({needRequestPhotos:!0,pasteAsFile:!0,showUploadFromGGDrive:!1},a),s={ScreenCode:r,ProjectId:"",Id:o,FieldName:t.fieldName};return Object(v.jsx)("div",{children:Object(v.jsx)(i.MyUI,{type:"file_manager",requestData:s,fnList:e.fnList,configFile:c,canUpload:e.canUpload})})}var T=function(e){e.fieldName;var t=e.extra,n=e.row,o=t||{},r=e.more,l=!1;if("boolean"===typeof o.CanEdit&&(l=o.CanEdit),1==l)if(null==r.fCanEdit&&null!=r.canEditF&&(r.fCanEdit=r.canEditF),"boolean"===typeof r.fCanEdit)l=r.fCanEdit;else if("string"===typeof r.fCanEdit&&r.fCanEdit.length>0)if(null!=n[r.fCanEdit])l=n[r.fCanEdit];else if(r.fCanEdit.indexOf(",")>-1){var i=r.fCanEdit.split(",");if(i&&i.length>0){var c,s=Object(a.a)(i);try{for(s.s();!(c=s.n()).done;){if(0==n[c.value]){l=!1;break}}}catch(p){s.e(p)}finally{s.f()}}}if(null!=r.lockF||null!=r.fLock){var u=r.lockF||r.fLock;if("boolean"==typeof u)l=!u;else if("string"==typeof u&&u.length>0)if(null!=n[u])l=!n[u];else if(u.indexOf(",")>-1){var f=u.split(",");if(f&&f.length>0){var d,b=Object(a.a)(f);try{for(b.s();!(d=b.n()).done;){if(1==n[d.value]){l=!1;break}}}catch(p){b.e(p)}finally{b.f()}}}}return l};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.props;0;var n=Object(u.useState)(0),a=Object(r.a)(n,2),c=(a[0],a[1],Object(u.useState)(null===t.cell||void 0===t.cell?"":t.cell)),g=Object(r.a)(c,2),h=g[0],O=g[1],w=t.cell,E=t.extra,P=E.fieldName,S=Object(u.useState)(!1),N=Object(r.a)(S,2),A=N[0],U=N[1],L=Object(u.useState)(!1),H=Object(r.a)(L,2),k=H[0],D=H[1],R=f.a.useRef(new i.OneTableCell(t)),B=R.current;B.row=t.row,B.extra=E,t.custom&&!0!==B._updateCustom&&(B.more=Object(l.a)(Object(l.a)({},t.custom.more),B.more),B._updateCustom=!0);var I=B.row,V=f.a.useRef(j({oneTableCell:B,row:I,extra:E,cell:w})),q=V.current;null==B._onePage&&B.updateOnePage(b.j.fnGetOnePage(q));var G=B.more,W=Object(C.a)(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cbWhenEqual,n=I[P];console.log("updateValueCellFromRow:",n),h!=n?O(null===n||void 0===n?"":n):(console.log("call cbWhenEqual"),t&&t())};return!0===I.IsLocked?B.canEdit=!1:null!=B.canEdit&&!0!==B.canEdit&&!1!==B.canEdit||(B.canEdit=T({extra:B.extra,more:G,row:I})),f.a.useEffect((function(){"string"===typeof t.cell||"number"===typeof t.cell||"boolean"===typeof t.cell?t.cell!=h&&O(t.cell):O(t.cell)}),[t.cell]),{forceUpdate:W,fnList:q,updateValueCellFromRow:_,oneTableCell:B,extra:B.extra,row:B.row,fieldName:B.fieldName,more:B.more,moreObj:B.more,canEdit:B.canEdit,updateFieldData:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.warn("updateFieldData:",e,B),e==w||null==w&&""==e?(console.warn("not update:",e,w,n),n&&n.cbError&&n.cbError({msg:"Nothing to change"})):(U(!0),i.HUtils.runFuntion(B.fnList,x,[Object(l.a)(Object(l.a)({},n),{},{apiController:b.j.fnGetApiPath(q),fieldName:n.fieldName||B.fieldName,row:B.row,newValue:e,cbSuccess:function(e){console.warn("cbss",e),U(!1),b.j.fnForceUpdateTable(q,[]),n&&n.cbSuccess&&n.cbSuccess(e),t.fnList&&t.fnList.cbSuccessUpdate&&t.fnList.cbSuccessUpdate()},cbError:function(t){console.warn("cber",t),U(!1),n&&n.cbError&&n.cbError(e)}})]))},requestCustom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("requestCustom:",e),i.HUtils.runFuntion(B.fnList,M,[Object(l.a)({},e)])},getSharedConfig:function(){return{}},getMoreAttrsFromCustomConfig:function(){return i.MyTableCellHelpers.ConfigByTypes&&i.MyTableCellHelpers.ConfigByTypes[B.type]&&i.MyTableCellHelpers.ConfigByTypes[B.type].moreAttrs?i.MyTableCellHelpers.ConfigByTypes[B.type].moreAttrs:{}},getMorePropsButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultStyle,n={},o=t||{};return k&&(n.disabled=!0),G&&G.button&&G.button.style&&(o=Object(l.a)(Object(l.a)({},o),G.button.style)),o&&Object.keys(o).length>0&&(n.style=o),n},renderHide:function(){return Object(v.jsx)("div",{className:"disabled"})},isUpdating:A,setIsUpdating:function(e){U(e)},isFetching:k,setIsFetching:D,valueCell:h,setValueCell:O,classNameWrap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s()(e,Object(l.a)({disabled:!1===B.canEdit,"a-scrwhhover":null!=G.scrwhhover?G.scrwhhover:n.scrwhhover||!1,"styled-mini":G.styledMini},null!=t.custom&&null!=t.custom.className?Object(o.a)({},t.custom.className,!0):{}))},styleWrap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m.a.Cell_GetStyleCell({extra:E,more:G,row:I,defaultStyle:e,overideStyle:t})},onUpdateRow:function(e){i.HUtils.runFuntion(B.fnList,"onUpdateRow",[{row:I,newRow:e}])},getTextDisplaySelect:function(){var e="";if(G.fDisplay&&I[G.fDisplay]?e=I[G.fDisplay]:G.fShow&&I[G.fShow]&&(e=I[G.fShow]),""==e&&null!=h&&""!==h){var t=q.fnGetSourceData(),n=i.HOptions.getTextDisplayOfValueFromOptions(t,h);n&&(e=n)}return""==e&&(e=h||""),e},renderTopRight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.jsx)(i.MyTableCell,Object(l.a)(Object(l.a)({},t),{},{fnList:q,more:G,oneTableCell:B,type:"_barTopRight",moreBtns:e,moreConfig:n}))},renderLoadingOverlay:function(){return Object(v.jsx)("div",{className:"a-overlay-center",children:Object(v.jsx)(i.MyLoading,{type:"threedotsvertical",size:12})})},onClickForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customMore,n=e.cbSuccess,o=e.customShowForm,r=t||G;console.warn("onClickForm:",r),D(!0),Object(y.FlowCheckApiShowModal)({extra:E,row:I,more:G,fnList:q,cb:function(e){var t=e.canShow;e.config;if(t){var a=B.getConfigForm({customMore:r}),c=I;if(r.fDefaultValues&&(c=I[r.fDefaultValues]?I[r.fDefaultValues]:{}),a){var s=i.MyFormControlHelpers.getConfigFormFromConfigV1(a,{defaultValues:c,fnList:Object(l.a)(Object(l.a)({},q),{},{onSubmitForm:function(e,t){var o=t.myForm;console.warn("onSubmitForm:",e);var a=B.getConfigApi({customMore:r});return new Promise((function(t,r){a?(a.query=Object.assign(a.query,e),Object(p.a)(a).then((function(e){console.warn("onClickBtn API rs",e),Object(y.FlowParseResponseAndNeedReload)({extra:E,row:I,fieldName:P,more:G,oneTableCell:B,response:e}),o.closeMyModal&&o.closeMyModal(),n&&n(e),t(e)})).catch((function(e){r(e)}))):(console.warn("Missing configApi"),r("Missing configApi"))}))}})}),u=B.getConfigModal({customMore:r});o?o(s,Object(l.a)({},u)):d.f.showFromMyForm(s,Object(l.a)({},u))}else console.error("Missing configForm:",a)}D(!1)}})},onClickApi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customMore,n=(e.cbSuccess,e.cbError),o=e.cbBeforeRequest,r=e.cbAfterRequest,a=t||G;console.warn("onClickApi:",a);var l=B.getConfigApi({customMore:a});a.confirmMsg?d.f.showConfirm({title:a.titleConfirm||"Confirm",msg:a.confirmMsg,onClickOK:function(e){l?(o&&o(),Object(p.a)(l).then((function(e){console.warn("onClickBtn API rs",e),Object(y.FlowParseResponseAndNeedReload)({extra:E,row:I,fieldName:P,more:a,oneTableCell:B,response:e})})).finally((function(){r&&r()}))):console.warn("Missing configApi"),e&&e.hide&&e.hide()}}):l?(o&&o(),Object(p.a)(l).then((function(e){console.warn("onClickBtn API rs",e),Object(y.FlowParseResponseAndNeedReload)({extra:E,row:I,fieldName:P,more:a,oneTableCell:B,response:e})})).finally((function(){r&&r()}))):(console.warn("Missing configApi"),n&&n())},onClickFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ctc,n=e.customMore,o=e.canUpload,r=n||G;console.warn("onClickFiles:",r),d.f.showFromComponent((function(e){return Object(v.jsx)(F,Object(l.a)(Object(l.a)({},e),{},{more:r,canUpload:o,ctc:t}))}),{title:"Modal",backdrop:"static",size:"xl",showHeader:!1,fnList:{updateCell:function(e,t){console.warn("Updatecell:",e,t)},fnGetApiPath:function(){return b.j.fnGetApiPath(q)},onChangeData:function(e){console.warn("onChangeData:",e,w),e&&w?e.Id===w.Id||w.hasOwnProperty&&e.hasOwnProperty&&w.hasOwnProperty("Photos")&&e.hasOwnProperty("Photos")?(i.HUtils.mergeObjIfExist(I[P],e),i.HUtils.runFuntion(B.fnList,"onUpdateRow",[{row:I,newRow:I}]),W()):console.warn("Update data row, wrong ID",e,w):console.warn("Update data row, wrong data",e,w)}}})}}}},511:function(e,t,n){"use strict";var o=n(52);t.a=o.apiWithConfigApi},819:function(e,t,n){"use strict";var o=n(8),r=n(29),a=n(15),l=n(0),i=n.n(l),c=n(5),s=n.n(c),u=n(23),f=n.n(u),d=n(7),b=["children","className","barClassName","cssModule","value","min","max","animated","striped","color","bar","multi","tag","style","barStyle","barAriaValueText","barAriaLabelledBy"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={children:s.a.node,bar:s.a.bool,multi:s.a.bool,tag:d.q,value:s.a.oneOfType([s.a.string,s.a.number]),min:s.a.oneOfType([s.a.string,s.a.number]),max:s.a.oneOfType([s.a.string,s.a.number]),animated:s.a.bool,striped:s.a.bool,color:s.a.string,className:s.a.string,barClassName:s.a.string,cssModule:s.a.object,style:s.a.object,barStyle:s.a.object,barAriaValueText:s.a.string,barAriaLabelledBy:s.a.string},y=function(e){var t=e.children,n=e.className,r=e.barClassName,l=e.cssModule,c=e.value,s=e.min,u=e.max,p=e.animated,g=e.striped,y=e.color,v=e.bar,h=e.multi,j=e.tag,O=e.style,w=e.barStyle,C=e.barAriaValueText,x=e.barAriaLabelledBy,M=Object(a.a)(e,b),F=Object(d.s)(c)/Object(d.s)(u)*100,T=Object(d.m)(f()(n,"progress"),l),E={className:Object(d.m)(f()("progress-bar",v&&n||r,p?"progress-bar-animated":null,y?"bg-"+y:null,g||p?"progress-bar-striped":null),l),style:m(m(m({},v?O:{}),w),{},{width:F+"%"}),role:"progressbar","aria-valuenow":c,"aria-valuemin":s,"aria-valuemax":u,"aria-valuetext":C,"aria-labelledby":x,children:t};return v?i.a.createElement(j,Object(o.a)({},M,E)):i.a.createElement(j,Object(o.a)({},M,{style:O,className:T}),h?t:i.a.createElement("div",E))};y.propTypes=g,y.defaultProps={tag:"div",value:0,min:0,max:100,style:{},barStyle:{}},t.a=y}}]);
//# sourceMappingURL=56.bf11eba4.chunk.js.map