(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[30],{1316:function(t,e,a){"use strict";a.r(e);var n,s=a(22),i=a(4),o=a(16),r=a(17),c=a(18),l=a(19),u=a(0),d=a(20),f=a(88),p=a(1),g=a(11),j=a(661),b=a(658),h=a(659),m=a(660),k=a(2),v=function(t){Object(c.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).requestOptions=function(){n.setState({loading:!0},(function(){Object(f.a)({request:{method:"POST",path:"/api/v1/UserTask_Mine",name:"Options"},data:{},successCallBack:function(t){t.Data&&n.setState({options:t.Data,loading:!1},(function(){n.requestTasks()}))},errorCallBack:function(t){console.log(t),n.setState({loading:!1})}})}))},n.requestTasks=function(){n.setState({loading:!0},(function(){Object(f.a)({request:{method:"POST",path:"/api/v1/".concat(n._getApiPath()),name:!0===n.state.assignByMe?"GetTasksAssign":"List"},data:Object(i.a)(Object(i.a)(Object(i.a)({},n._getRequestData()),n.state.filters),n.state.pagination),successCallBack:function(t){n.setState({tasks:t.Data.Data||[],total:t.Data.Total,loading:!1})},errorCallBack:function(t){console.log(t),n.setState({loading:!1})}})}))},n._getApiPath=function(){var t=n._getConfigFromConfigPage();return t.apiPath?t.apiPath:"UserTask_Mine"},n._getRequestData=function(){return(n.props.configPage||{}).RequestData||{}},n._getConfigFromConfigPage=function(){return(n.props.configPage||{}).Config||{}},n.state={filters:{},assignByMe:!1,pagination:{Page:1,PageSize:20},total:0},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.document.title="DailyTasks - ".concat(p.HCF.getCF("title")),this.requestOptions()}},{key:"render",value:function(){var t=this,e=this.state.tasks,a=this._getConfigFromConfigPage();return Object(k.jsxs)(x,{children:[Object(k.jsxs)("div",{className:"a-header",style:!0===a.hideHeader?{display:"none"}:{},children:[Object(k.jsx)("div",{className:"a-left",children:Object(k.jsx)("div",{className:"a-title",children:"My Tasks"})}),Object(k.jsxs)("div",{className:"a-right",children:[Object(k.jsxs)("button",{className:"btn btn-primary",onClick:function(){g.f.showFromMyUI({type:"prj_dailytask",fnList:{reloadTasks:function(){t.requestTasks()}}},{title:"Report Task",size:"xl",backdrop:"static"})},children:[Object(k.jsx)("i",{className:"fa fa-file-text-o"})," Report Task"]}),Object(k.jsxs)("button",{className:"btn btn-primary",onClick:function(){g.f.showFromMyUI({type:"prj_new_task",data:{},fnList:{getCanEdit:function(){return!0},getOptions:function(){return t.state.options},reloadTasks:function(){t.requestTasks()}}},{title:"New Task"})},children:[Object(k.jsx)("i",{className:"fa fa-plus"})," New Task"]}),Object(k.jsx)(m.b,{}),Object(k.jsx)("button",{className:"btn btn-primary",onClick:function(){g.f.showFromMyUI({type:"prj_task_user_setting",data:{}},{title:"User Setting"})},children:Object(k.jsx)("i",{className:"fa fa-cog"})})]})]}),Object(k.jsxs)("div",{className:"a-body",children:[Object(k.jsxs)("div",{className:"a-filter",children:[Object(k.jsx)(b.a,{fnList:{reloadTasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.filters;t.state.filters=a||{},t.state.pagination.Page=1,t.requestTasks()},getOptions:function(){return t.state.options}}}),Object(k.jsx)("div",{style:{marginLeft:"1rem"},children:Object(k.jsxs)("div",{class:"form-check form-switch",children:[Object(k.jsx)("input",{class:"form-check-input",type:"checkbox",id:"cbAssignByMe",defaultChecked:this.state.assignByMe,onChange:function(e){t.setState({assignByMe:e.currentTarget.checked,pagination:{Page:1,PageSize:20}},(function(){t.requestTasks()}))}}),Object(k.jsx)("label",{class:"form-check-label",for:"cbAssignByMe",children:"Assigned tasks to others (by me)"})]})})]}),null!=e&&Object(k.jsx)("div",{className:"a-tasks",children:e.length>0?Object(k.jsx)(p.MyUI,{type:"grid",data:e,typeItem:"prj_task_item",morePropsItem:{mode:"list",showAssignTo:a.showAssignTo},fnList:{onClickItem:function(e){console.log("onClick item:",e),g.f.showFromMyUI({type:"prj_task_item",data:e,mode:"detail",fnList:{getCanEdit:function(){return!0},getOptions:function(){return t.state.options},afterUpdateData:function(a){for(var n=0,s=Object.keys(a);n<s.length;n++){var i=s[n];e[i]=a[i]}t.forceUpdate()},reloadTasks:function(){t.requestTasks()}}},{title:"Task",backdrop:"static"})}}}):Object(k.jsxs)("div",{className:"a-tasks-empty",children:[Object(k.jsx)("img",{src:"https://cdn.shopify.com/s/files/1/0262/4071/2726/files/emptystate-files.png",width:"120px",alt:"empty"}),Object(k.jsx)("div",{children:"You don't have any tasks to show"}),Object(k.jsx)("div",{children:"Create new one"})]})}),Object(k.jsx)("div",{className:"a-pagination",children:Object(k.jsx)(h.a,{page:this.state.pagination.Page,total:this.state.total,pageSize:this.state.pagination.PageSize,onChangePage:function(e){t.setState({pagination:{Page:e,PageSize:t.state.pagination.PageSize}},(function(){t.requestTasks()}))}})}),null==e&&!0===this.state.loading&&Object(k.jsxs)("div",{className:"a-tasks-empty",children:[Object(k.jsx)(j.a,{}),Object(k.jsx)("div",{children:"Loading..."})]})]})]})}}]),a}(u.Component),x=d.b.div(n||(n=Object(s.a)(["\n  & > .a-header {\n    display: flex;\n    // border-bottom: 1px solid #1c4e7e;\n    margin-bottom: 10px;\n    padding: 10px;\n    border-radius: 10px;\n    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.01), 0 4px 4px rgba(0, 0, 0, 0.02),\n      0 10px 8px rgba(0, 0, 0, 0.03), 0 15px 15px rgba(0, 0, 0, 0.03);\n    & > .a-left {\n      & > .a-title {\n        font-size: 20px;\n      }\n    }\n    & > .a-right {\n      margin-left: auto;\n      & > * {\n        margin-left: 2px;\n      }\n    }\n  }\n  & > .a-body {\n    padding: 10px;\n    background: white;\n    border-radius: 4px;\n    & .a-filter {\n      margin-bottom: 10px;\n      display: flex;\n      align-items: center;\n      & .form-switch {\n        padding-left: 2.5em;\n        margin: 0px;\n      }\n    }\n    & .a-tasks-empty {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-direction: column;\n      // background: white;\n      // border-radius: 10px;\n      padding: 2rem;\n    }\n    & .a-pagination {\n      margin-top: 1rem;\n      & .page-item.active .page-link {\n        background-color: #0082ff;\n      }\n      & .page-item .page-link {\n        border-radius: 0px;\n      }\n    }\n  }\n"])));e.default=v},658:function(t,e,a){"use strict";var n,s=a(22),i=a(16),o=a(17),r=a(18),c=a(19),l=a(0),u=a(20),d=(a(88),a(547),a(1)),f=a(11),p=a(57),g=a.n(p),j=a(2),b="all",h="todo",m="doing",k="done",v="notdone",x=function(t){Object(r.a)(a,t);var e=Object(c.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).requestTasks=function(){var t=n.props.fnList||{};d.HUtils.runFuntion(t,"reloadTasks",[{filters:n.state.filters}])},n._getTypeFilter=function(){var t=n.state.filters||{};if(0==Object.keys(t).length)return b;if(t.TaskStatusCode){if("ToDo"==t.TaskStatusCode)return h;if("Done"==t.TaskStatusCode)return k;if("Doing"==t.TaskStatusCode)return m}else if(t.TaskStatusNotDone)return v;return""},n._clickFilter=function(t){var e=n.state.filters||{};t==b?e={}:t==h?(e.TaskStatusCode="ToDo",delete e.TaskStatusNotDone):t==k?(e.TaskStatusCode="Done",delete e.TaskStatusNotDone):t==m?(e.TaskStatusCode="Doing",delete e.TaskStatusNotDone):t==v&&(delete e.TaskStatusCode,e.TaskStatusNotDone=!0),n.setState({filters:e},(function(){n.requestTasks()}))},n.state={filters:{}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,e=[{value:b,name:"All"},{value:h,name:"ToDo"},{value:m,name:"Doing"},{value:k,name:"Done"},{value:v,name:"Not Done"}];!0===this.props.mini&&(e=[{value:b,name:"All"},{value:v,name:"Not Done"}]);var a=!1,n=d.HUtils.runFuntion(this.props.fnList,"getOptions",[]);return n&&n.ProjectList&&n.ProjectList.length>0&&(a=!0),console.log("_showFilterProject project:",n),Object(j.jsxs)(O,{children:[e.map((function(e,a){return Object(j.jsx)("div",{className:g()({"a-active":t._getTypeFilter()==e.value}),onClick:function(){t._clickFilter(e.value)},children:e.name},a)})),!0===a&&Object(j.jsx)(f.i,{overlay:function(e){var a;return Object(j.jsx)(f.h,{type:"select_box_search_v2",sourceData:null===n||void 0===n?void 0:n.ProjectList,valueSelected:null===(a=t.state.filters)||void 0===a?void 0:a.ProjectId,onChange:function(a){console.warn("onChange:",a,a.Value);var n=t.state.filters||{};n.ProjectId=a.Value,n.ProjectId_Text=a.Text,t.setState({filters:n},(function(){e.hide&&e.hide(),t.requestTasks()}))}})},overlayClassName:"m-popover",placement:"bottom",destroyTooltipOnHide:!0,children:Object(j.jsx)("div",{className:g()("a-pick-project",{"a-active":null!=this.state.filters.ProjectId}),children:this.state.filters&&this.state.filters.ProjectId?"".concat(this.state.filters.ProjectId_Text):"Ch\u1ecdn Project"})})]})}}]),a}(l.Component),O=u.b.div(n||(n=Object(s.a)(["\n  display: flex;\n  & > div {\n    background: white;\n    padding: 0 8px;\n    font-size: 12px;\n    border: 1px solid #9f9f9f;\n    border-radius: 10px;\n    height: 20px;\n    margin-right: 2px;\n    cursor: pointer;\n    color: #9f9f9f;\n    &.a-active {\n      background: #2fa4e7;\n      color: white;\n      border: 1px solid #0673b1;\n    }\n  }\n"])));e.a=x},659:function(t,e,a){"use strict";var n,s=a(22),i=a(16),o=a(17),r=a(18),c=a(19),l=a(0),u=a(20),d=(a(1),a(57)),f=a.n(d),p=a(2),g=function(t){Object(r.a)(a,t);var e=Object(c.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).onChangePage=function(t){var e=n.props.onChangePage;e&&e(t)},n.state={},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,e=this.props,a=e.page,n=e.total,s=e.pageSize;if(0==n||s<=0)return Object(p.jsx)("div",{});var i=parseInt(n/s);return n%s>0&&(i+=1),i<2?Object(p.jsx)("div",{}):Object(p.jsx)(j,{children:Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{className:"pagination justify-content-center",children:[Object(p.jsx)("li",{className:f()("page-item",{disabled:a<2}),children:Object(p.jsx)("a",{className:"page-link",href:"#",onClick:function(e){e.preventDefault(),t.onChangePage(a-1)},children:Object(p.jsx)("i",{className:"fa fa-chevron-left"})})}),new Array(i).fill(1).map((function(e,n){return Object(p.jsx)("li",{className:f()("page-item",{active:a==n+1}),children:Object(p.jsx)("a",{className:"page-link",href:"#",onClick:function(e){e.preventDefault(),t.onChangePage(n+1)},children:n+1})},n)})),Object(p.jsx)("li",{className:f()("page-item",{disabled:a>=i}),children:Object(p.jsx)("a",{className:"page-link",href:"#",onClick:function(e){e.preventDefault(),t.onChangePage(a+1)},children:Object(p.jsx)("i",{className:"fa fa-chevron-right"})})})]})})})}}]),a}(l.Component),j=u.b.div(n||(n=Object(s.a)([""])));e.a=g},660:function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));var n=a(16),s=a(17),i=a(18),o=a(19),r=a(0),c=a(88),l=(a(1),a(11)),u=(a(174),a(57)),d=a.n(u),f=a(2),p=function(t){Object(i.a)(a,t);var e=Object(o.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).requestList=function(){s.setState({loading:!0},(function(){Object(c.a)({request:{method:"POST",path:"/api/v1/TimeTrackingSystem_Mine",name:"List"},data:{},successCallBack:function(t){console.log("res:",t);var e=[];t.Data&&t.Data.Data&&(e=t.Data.Data),s.setState({data:e,loading:!1},(function(){g.data=e}))},errorCallBack:function(t){console.log(t),s.setState({loading:!1})}})}))},s.state={loading:!1,data:null},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.requestList(),g.reloadBtn=function(){g.data&&t.setState({data:g.data})}}},{key:"render",value:function(){var t=this.state.data,e=null!=t&&0==t.length;return this.state.loading?Object(f.jsxs)("button",{disabled:!0,className:d()("btn btn-primary"),onClick:function(){},children:[Object(f.jsx)("i",{className:"fa fa-spin fa-spinner"})," SET"]}):Object(f.jsxs)("button",{className:d()("btn btn-primary",{"btn-warning ani-heartBeat ani-run infinite":e}),onClick:function(){l.f.showFromMyUI({type:"prj_set",data:{}},{title:"SET"})},children:[Object(f.jsx)("i",{className:"fa fa-sign-in"})," SET"]})}}]),a}(r.Component),g={data:null,reloadBtn:null};e.b=p},661:function(t,e,a){"use strict";var n=a(8),s=a(15),i=a(0),o=a.n(i),r=a(5),c=a.n(r),l=a(23),u=a.n(l),d=a(7),f=["className","cssModule","type","size","color","children","tag"],p={tag:d.q,type:c.a.string,size:c.a.string,color:c.a.string,className:c.a.string,cssModule:c.a.object,children:c.a.string},g=function(t){var e=t.className,a=t.cssModule,i=t.type,r=t.size,c=t.color,l=t.children,p=t.tag,g=Object(s.a)(t,f),j=Object(d.m)(u()(e,!!r&&"spinner-"+i+"-"+r,"spinner-"+i,!!c&&"text-"+c),a);return o.a.createElement(p,Object(n.a)({role:"status"},g,{className:j}),l&&o.a.createElement("span",{className:Object(d.m)("sr-only",a)},l))};g.propTypes=p,g.defaultProps={tag:"div",type:"border",children:"Loading..."},e.a=g}}]);
//# sourceMappingURL=30.e3eb9e62.chunk.js.map