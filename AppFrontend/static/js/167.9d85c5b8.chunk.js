(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[167],{1329:function(t,n,e){"use strict";e.r(n);var a,i=e(16),o=e(17),s=e(18),r=e(19),c=e(22),l=e(0),d=e(20),u=e(88),p=e(1),f=e(660),h=e(2),b=d.b.div(a||(a=Object(c.a)(['\n  & .a-list {\n    border: 1px solid #cbcbcb;\n    padding: 1rem;\n    margin-top: 1rem;\n    box-shadow: rgb(141 141 141 / 40%) 0 2px 4px,\n      rgb(181 181 181 / 30%) 0 7px 13px -3px,\n      rgb(169 169 169 / 50%) 0 -3px 0 inset;\n    & > div {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      padding: 5px 0px;\n      border-bottom: 1px solid #d9d9d9;\n    }\n  }\n  & .a-loading {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #ffffffa8;\n  }\n  & .a-set {\n    display: grid;\n    gap: 10px;\n    grid-template-columns: 1fr 1fr;\n    & button {\n      align-items: center;\n      appearance: none;\n      background-image: radial-gradient(\n        100% 100% at 100% 0,\n        #5adaff 0,\n        #5468ff 100%\n      );\n      border: 0;\n      border-radius: 6px;\n      box-shadow: rgba(45, 35, 66, 0.4) 0 2px 4px,\n        rgba(45, 35, 66, 0.3) 0 7px 13px -3px,\n        rgba(58, 65, 111, 0.5) 0 -3px 0 inset;\n      box-sizing: border-box;\n      color: #fff;\n      cursor: pointer;\n      display: inline-flex;\n      font-family: "JetBrains Mono", monospace;\n      height: 48px;\n      justify-content: center;\n      line-height: 1;\n      list-style: none;\n      overflow: hidden;\n      padding-left: 16px;\n      padding-right: 16px;\n      position: relative;\n      text-align: left;\n      text-decoration: none;\n      transition: box-shadow 0.15s, transform 0.15s;\n      user-select: none;\n      -webkit-user-select: none;\n      touch-action: manipulation;\n      white-space: nowrap;\n      will-change: box-shadow, transform;\n      font-size: 18px;\n      &:hover {\n        box-shadow: rgba(45, 35, 66, 0.4) 0 4px 8px,\n          rgba(45, 35, 66, 0.3) 0 7px 13px -3px;\n        transform: translateY(-2px);\n      }\n      &:disabled {\n        opacity: 0.2;\n      }\n    }\n    & .a-set-in {\n      border: 0px;\n      background-image: radial-gradient(\n        100% 100% at 100% 0,\n        #5de77c 0,\n        #28a745 100%\n      );\n      color: white;\n    }\n    & .a-set-out {\n      border: 0px;\n      background-image: radial-gradient(\n        100% 100% at 100% 0,\n        #ff7e83 0,\n        #c71c22 100%\n      );\n      color: white;\n    }\n  }\n']))),g=function(t){Object(s.a)(e,t);var n=Object(r.a)(e);function e(t){var a;return Object(i.a)(this,e),(a=n.call(this,t)).onFocus=function(){console.log("on focus:",new Date),a.checkLastTimeShowSET()},a.checkLastTimeShowSET=function(){var t=(new Date).getTime(),n=parseInt(localStorage.getItem("checkLastTimeShowSET"))||t;localStorage.setItem("checkLastTimeShowSET","".concat(t));var e=Math.abs(t-n+1e4);(console.log("time:",new Date,t,n,e),e>12e4)?(console.log("need refresh"),a.requestList()):a._lastRequestTime&&Math.abs(t-a._lastRequestTime)>36e5&&a.requestList()},a.requestList=function(){a._lastRequestTime=(new Date).getTime(),a.setState({loading:!0},(function(){Object(u.a)({request:{method:"POST",path:"/api/v1/TimeTrackingSystem_Mine",name:"List"},data:{},successCallBack:function(t){console.log("res:",t);var n=[];t.Data&&t.Data.Data&&(n=t.Data.Data),a.setState({data:n,loading:!1},(function(){f.a.data=n,f.a.reloadBtn&&f.a.reloadBtn()}))},errorCallBack:function(t){console.log(t),a.setState({loading:!1})}})}))},a.requestSet=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState({loading:!0},(function(){Object(u.a)({request:{method:"POST",path:"/api/v1/TimeTrackingSystem_Mine",name:1==t?"SetLogout":"SetLogin"},data:{},successCallBack:function(t){console.log("res:",t),a.requestList()},errorCallBack:function(t){console.log(t),a.setState({loading:!1})}})}))},a.state={loading:!1,data:null},a}return Object(o.a)(e,[{key:"componentDidMount",value:function(){this.requestList(),this.checkLastTimeShowSET();var t=this;this._checkTime=setInterval((function(){t.checkLastTimeShowSET()}),6e4),window.addEventListener("focus",this.onFocus)}},{key:"componentWillUnmount",value:function(){clearInterval(this._checkTime),window.removeEventListener("focus",this.onFocus)}},{key:"render",value:function(){var t=this,n=!1,e=this.state.data;return null!=e&&e.length>0&&(n=!0),Object(h.jsxs)(b,{children:[Object(h.jsxs)("div",{className:"a-set",children:[Object(h.jsx)("button",{className:"a-set-in",onClick:function(){t.requestSet()},children:"Check IN"}),Object(h.jsx)("button",{disabled:0==n,className:"a-set-out",onClick:function(){t.requestSet(!0)},children:"Check OUT"})]}),Object(h.jsxs)("div",{className:"a-list",children:[(null==e||0==e.length)&&Object(h.jsx)("div",{style:{textAlign:"center",gridTemplateColumns:"1fr",border:"0px",margin:"10px 0px"},children:"No information"}),null!=this.state.data&&this.state.data.length>0&&this.state.data.map((function(t,n){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{fontWeight:"bold"},children:t.TypeSet||"[Empty]"}),Object(h.jsx)("div",{children:p.HFormat.format(t.TimeSet,{type:"datetime"})})]},n)}))]}),!0===this.state.loading&&Object(h.jsx)("div",{className:"a-loading",children:Object(h.jsx)("i",{className:"fa fa-spin fa-spinner"})})]})}}]),e}(l.Component);n.default=g},660:function(t,n,e){"use strict";e.d(n,"a",(function(){return h}));var a=e(16),i=e(17),o=e(18),s=e(19),r=e(0),c=e(88),l=(e(1),e(11)),d=(e(174),e(57)),u=e.n(d),p=e(2),f=function(t){Object(o.a)(e,t);var n=Object(s.a)(e);function e(t){var i;return Object(a.a)(this,e),(i=n.call(this,t)).requestList=function(){i.setState({loading:!0},(function(){Object(c.a)({request:{method:"POST",path:"/api/v1/TimeTrackingSystem_Mine",name:"List"},data:{},successCallBack:function(t){console.log("res:",t);var n=[];t.Data&&t.Data.Data&&(n=t.Data.Data),i.setState({data:n,loading:!1},(function(){h.data=n}))},errorCallBack:function(t){console.log(t),i.setState({loading:!1})}})}))},i.state={loading:!1,data:null},i}return Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.requestList(),h.reloadBtn=function(){h.data&&t.setState({data:h.data})}}},{key:"render",value:function(){var t=this.state.data,n=null!=t&&0==t.length;return this.state.loading?Object(p.jsxs)("button",{disabled:!0,className:u()("btn btn-primary"),onClick:function(){},children:[Object(p.jsx)("i",{className:"fa fa-spin fa-spinner"})," SET"]}):Object(p.jsxs)("button",{className:u()("btn btn-primary",{"btn-warning ani-heartBeat ani-run infinite":n}),onClick:function(){l.f.showFromMyUI({type:"prj_set",data:{}},{title:"SET"})},children:[Object(p.jsx)("i",{className:"fa fa-sign-in"})," SET"]})}}]),e}(r.Component),h={data:null,reloadBtn:null};n.b=f}}]);
//# sourceMappingURL=167.9d85c5b8.chunk.js.map