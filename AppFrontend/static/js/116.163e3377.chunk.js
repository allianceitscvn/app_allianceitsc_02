(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[116],{1354:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return g}));var n,i=o(4),r=o(22),a=(o(0),o(87)),l=o(20),c=o(510),s=o(9),f=o(2),u=l.b.div(n||(n=Object(r.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  & button {\n    width: 100%;\n    height: 100%;\n    & i {\n      font-size: 1.3rem;\n    }\n    & img {\n      object-fit: contain;\n    }\n  }\n"]))),d=function(e){var t="fa fa-file-o";return null!=e&&(e.indexOf("image")>-1?t="fa fa-file-photo-o":e.indexOf("pdf")>-1?t="fa fa-file-pdf-o":e.indexOf(".document")>-1?t="fa fa-file-word-o":e.indexOf(".sheet")>-1?t="fa fa-file-excel-o":e.indexOf("multi")>-1&&(t="fa fa-files-o")),t},h=function(e){var t=e.more||{},o=e.row||{},n=e.fieldName||"",r="data:image/png;base64,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",a="120px",l={};return o[n]&&o[n].AvatarPhoto?r=o[n].AvatarPhoto.FileUrl:t.photoEmpty&&(r=t.photoEmpty),t.maxHeight&&(a=t.maxHeight),t.styleImage&&(l=t.styleImage),Object(f.jsx)("img",{src:r,alt:"",style:Object(i.a)({width:"100%",height:"100%",maxHeight:a},l),loading:"lazy"})};function g(e){var t=e.row,o=e.extra,n=Object(c.a)({props:e}),i=n.more||{},r=o.fieldName,l="",g=0;return t[r]&&t[r].Photos&&(g=t[r].Photos.length,t[r].AvatarPhoto&&(l=t[r].AvatarPhoto.Type)),Object(f.jsx)(u,{className:"mct-files",children:Object(f.jsxs)(a.a,{color:"link",onClick:function(){n.onClickFiles({ctc:n,canUpload:n.canEdit})},children:[i.showPhoto?Object(f.jsx)(h,{more:i,row:t,fieldName:n.fieldName}):Object(f.jsx)("i",{className:d(l)}),s.k.fnRenderBadge(n.fnList,[{count:g}])]})})}},510:function(e,t,o){"use strict";var n=o(32),i=o(13),r=o(31),a=o(4),l=o(1),c=o(57),s=o.n(c),f=o(0),u=o.n(f),d=o(11),h=o(9),g=o(511),E=o(155),C=o(157),I=o(79),m=o(2),p="fnGetScreenCode",A=function(e){var t=e.oneTableCell,o=Object(a.a)({},t.fnList);return o[h.O]=function(){var e=t.row,n=t.extra,i=t.extra.Type.source,r=h.j.getSourceList(o);if(C.e(i))return C.b(r,i,e,n.Type.sourceField);if(i&&i.startsWith("["))return l.HJson.getObj(i);if(i&&i.startsWith("f")){var a=i.slice(1,i.length);return null!=e[a]&&Array.isArray(e[a])?e[a]:null!=e[i]&&Array.isArray(e[i])?e[i]:[]}return r[i]||[]},o[h.T]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.customMore,n=e.count,i=e.tooltip,r=t.row,a=t.more;return w.renderBadge({more:o||a,row:r,count:n,tooltip:i})},o[h.H]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.customTitle;return E.a.Cell_GetHeaderTitle({extra:t.extra,customTitle:o})},o[h.u]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0,n=t.more,i=o;return n&&n.hasOwnProperty(e)&&(i=n[e]),i},o[h.v]=function(){var e=t.row,o=t.extra,n=t.more;return E.a.Cell_GetConfigModal({extra:o,more:n,row:e})},o[h.I]=function(){var e=t.row,o=t.extra,n=t.more,i=t.getValue();if(!1===Object(I.FlowGetCanShow)({extra:o,row:e,more:n}))return!0;return!(!n[I.KMore.hideWhenEmpty]||""!==i&&null!=i&&0!==i)||(!(!n[I.KMore.hideWhenNull]||null!=i)||!!(l.MyTableCellHelpers.ConfigByTypes&&l.MyTableCellHelpers.ConfigByTypes[t.type]&&l.MyTableCellHelpers.ConfigByTypes[t.type].isHide&&l.MyTableCellHelpers.ConfigByTypes[t.type].isHide(t)))},o.onSendMsg=function(e){console.error("missing onSendMsg, need update fnList",e)},o.onReExpand=function(){var e=t.row;l.HUtils.runFuntion(e,"_fnForceUpdateDetail")},t.fnList=o,o},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l.HUtils.runFuntion(e.fnList,p,t)},w={renderBadge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.more,o=void 0===t?{}:t,n=e.row,i=void 0===n?{}:n,r=e.count,a=e.tooltip,c=o.configBadge||o.badge;if(null!=r||c&&!0===c.show){var s=r,f=a;if(c&&c.fCount&&null!=i[c.fCount]&&(s=i[c.fCount]),s)return c&&c.fTooltip&&i[c.fTooltip]&&(f=i[c.fTooltip]),f?Object(m.jsx)(d.k,{overlay:Object(m.jsx)(l.MyUI,{type:"html",html:f}),children:Object(m.jsx)("span",{className:"mct-ui-badge",children:s})}):Object(m.jsx)("span",{className:"mct-ui-badge",children:s})}}},y=o(156),v="fnRequestUpdate",j="fnRequestCustom";function Q(e){var t=e.ctc,o=e.more,n=t.row.Id,i=b(t),r={};o&&(o.fID&&t.row[o.fID]&&(n=t.row[o.fID]),r=o.configFile||o.file||{});var c=Object(a.a)({needRequestPhotos:!0,pasteAsFile:!0,showUploadFromGGDrive:!1},r),s={ScreenCode:i,ProjectId:"",Id:n,FieldName:t.fieldName};return Object(m.jsx)("div",{children:Object(m.jsx)(l.MyUI,{type:"file_manager",requestData:s,fnList:e.fnList,configFile:c,canUpload:e.canUpload})})}var O=function(e){e.fieldName;var t=e.extra,o=e.row,n=t||{},i=e.more,a=!1;if("boolean"===typeof n.CanEdit&&(a=n.CanEdit),1==a)if(null==i.fCanEdit&&null!=i.canEditF&&(i.fCanEdit=i.canEditF),"boolean"===typeof i.fCanEdit)a=i.fCanEdit;else if("string"===typeof i.fCanEdit&&i.fCanEdit.length>0)if(null!=o[i.fCanEdit])a=o[i.fCanEdit];else if(i.fCanEdit.indexOf(",")>-1){var l=i.fCanEdit.split(",");if(l&&l.length>0){var c,s=Object(r.a)(l);try{for(s.s();!(c=s.n()).done;){if(0==o[c.value]){a=!1;break}}}catch(g){s.e(g)}finally{s.f()}}}if(null!=i.lockF||null!=i.fLock){var f=i.lockF||i.fLock;if("boolean"==typeof f)a=!f;else if("string"==typeof f&&f.length>0)if(null!=o[f])a=!o[f];else if(f.indexOf(",")>-1){var u=f.split(",");if(u&&u.length>0){var d,h=Object(r.a)(u);try{for(h.s();!(d=h.n()).done;){if(1==o[d.value]){a=!1;break}}}catch(g){h.e(g)}finally{h.f()}}}}return a};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.props;0;var o=Object(f.useState)(0),r=Object(i.a)(o,2),c=(r[0],r[1],Object(f.useState)(null===t.cell||void 0===t.cell?"":t.cell)),C=Object(i.a)(c,2),p=C[0],b=C[1],w=t.cell,B=t.extra,R=B.fieldName,M=Object(f.useState)(!1),x=Object(i.a)(M,2),F=x[0],S=x[1],U=Object(f.useState)(!1),T=Object(i.a)(U,2),L=T[0],P=T[1],D=u.a.useRef(new l.OneTableCell(t)),G=D.current;G.row=t.row,G.extra=B,t.custom&&!0!==G._updateCustom&&(G.more=Object(a.a)(Object(a.a)({},t.custom.more),G.more),G._updateCustom=!0);var H=G.row,k=u.a.useRef(A({oneTableCell:G,row:H,extra:B,cell:w})),N=k.current;null==G._onePage&&G.updateOnePage(h.j.fnGetOnePage(N));var V=G.more,Y=Object(y.a)(),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cbWhenEqual,o=H[R];console.log("updateValueCellFromRow:",o),p!=o?b(null===o||void 0===o?"":o):(console.log("call cbWhenEqual"),t&&t())};return!0===H.IsLocked?G.canEdit=!1:null!=G.canEdit&&!0!==G.canEdit&&!1!==G.canEdit||(G.canEdit=O({extra:G.extra,more:V,row:H})),u.a.useEffect((function(){"string"===typeof t.cell||"number"===typeof t.cell||"boolean"===typeof t.cell?t.cell!=p&&b(t.cell):b(t.cell)}),[t.cell]),{forceUpdate:Y,fnList:N,updateValueCellFromRow:J,oneTableCell:G,extra:G.extra,row:G.row,fieldName:G.fieldName,more:G.more,moreObj:G.more,canEdit:G.canEdit,updateFieldData:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.warn("updateFieldData:",e,G),e==w||null==w&&""==e?(console.warn("not update:",e,w,o),o&&o.cbError&&o.cbError({msg:"Nothing to change"})):(S(!0),l.HUtils.runFuntion(G.fnList,v,[Object(a.a)(Object(a.a)({},o),{},{apiController:h.j.fnGetApiPath(N),fieldName:o.fieldName||G.fieldName,row:G.row,newValue:e,cbSuccess:function(e){console.warn("cbss",e),S(!1),h.j.fnForceUpdateTable(N,[]),o&&o.cbSuccess&&o.cbSuccess(e),t.fnList&&t.fnList.cbSuccessUpdate&&t.fnList.cbSuccessUpdate()},cbError:function(t){console.warn("cber",t),S(!1),o&&o.cbError&&o.cbError(e)}})]))},requestCustom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("requestCustom:",e),l.HUtils.runFuntion(G.fnList,j,[Object(a.a)({},e)])},getSharedConfig:function(){return{}},getMoreAttrsFromCustomConfig:function(){return l.MyTableCellHelpers.ConfigByTypes&&l.MyTableCellHelpers.ConfigByTypes[G.type]&&l.MyTableCellHelpers.ConfigByTypes[G.type].moreAttrs?l.MyTableCellHelpers.ConfigByTypes[G.type].moreAttrs:{}},getMorePropsButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultStyle,o={},n=t||{};return L&&(o.disabled=!0),V&&V.button&&V.button.style&&(n=Object(a.a)(Object(a.a)({},n),V.button.style)),n&&Object.keys(n).length>0&&(o.style=n),o},renderHide:function(){return Object(m.jsx)("div",{className:"disabled"})},isUpdating:F,setIsUpdating:function(e){S(e)},isFetching:L,setIsFetching:P,valueCell:p,setValueCell:b,classNameWrap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s()(e,Object(a.a)({disabled:!1===G.canEdit,"a-scrwhhover":null!=V.scrwhhover?V.scrwhhover:o.scrwhhover||!1,"styled-mini":V.styledMini},null!=t.custom&&null!=t.custom.className?Object(n.a)({},t.custom.className,!0):{}))},styleWrap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E.a.Cell_GetStyleCell({extra:B,more:V,row:H,defaultStyle:e,overideStyle:t})},onUpdateRow:function(e){l.HUtils.runFuntion(G.fnList,"onUpdateRow",[{row:H,newRow:e}])},getTextDisplaySelect:function(){var e="";if(V.fDisplay&&H[V.fDisplay]?e=H[V.fDisplay]:V.fShow&&H[V.fShow]&&(e=H[V.fShow]),""==e&&null!=p&&""!==p){var t=N.fnGetSourceData(),o=l.HOptions.getTextDisplayOfValueFromOptions(t,p);o&&(e=o)}return""==e&&(e=p||""),e},renderTopRight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(m.jsx)(l.MyTableCell,Object(a.a)(Object(a.a)({},t),{},{fnList:N,more:V,oneTableCell:G,type:"_barTopRight",moreBtns:e,moreConfig:o}))},renderLoadingOverlay:function(){return Object(m.jsx)("div",{className:"a-overlay-center",children:Object(m.jsx)(l.MyLoading,{type:"threedotsvertical",size:12})})},onClickForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customMore,o=e.cbSuccess,n=e.customShowForm,i=t||V;console.warn("onClickForm:",i),P(!0),Object(I.FlowCheckApiShowModal)({extra:B,row:H,more:V,fnList:N,cb:function(e){var t=e.canShow;e.config;if(t){var r=G.getConfigForm({customMore:i}),c=H;if(i.fDefaultValues&&(c=H[i.fDefaultValues]?H[i.fDefaultValues]:{}),r){var s=l.MyFormControlHelpers.getConfigFormFromConfigV1(r,{defaultValues:c,fnList:Object(a.a)(Object(a.a)({},N),{},{onSubmitForm:function(e,t){var n=t.myForm;console.warn("onSubmitForm:",e);var r=G.getConfigApi({customMore:i});return new Promise((function(t,i){r?(r.query=Object.assign(r.query,e),Object(g.a)(r).then((function(e){console.warn("onClickBtn API rs",e),Object(I.FlowParseResponseAndNeedReload)({extra:B,row:H,fieldName:R,more:V,oneTableCell:G,response:e}),n.closeMyModal&&n.closeMyModal(),o&&o(e),t(e)})).catch((function(e){i(e)}))):(console.warn("Missing configApi"),i("Missing configApi"))}))}})}),f=G.getConfigModal({customMore:i});n?n(s,Object(a.a)({},f)):d.f.showFromMyForm(s,Object(a.a)({},f))}else console.error("Missing configForm:",r)}P(!1)}})},onClickApi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.customMore,o=(e.cbSuccess,e.cbError),n=e.cbBeforeRequest,i=e.cbAfterRequest,r=t||V;console.warn("onClickApi:",r);var a=G.getConfigApi({customMore:r});r.confirmMsg?d.f.showConfirm({title:r.titleConfirm||"Confirm",msg:r.confirmMsg,onClickOK:function(e){a?(n&&n(),Object(g.a)(a).then((function(e){console.warn("onClickBtn API rs",e),Object(I.FlowParseResponseAndNeedReload)({extra:B,row:H,fieldName:R,more:r,oneTableCell:G,response:e})})).finally((function(){i&&i()}))):console.warn("Missing configApi"),e&&e.hide&&e.hide()}}):a?(n&&n(),Object(g.a)(a).then((function(e){console.warn("onClickBtn API rs",e),Object(I.FlowParseResponseAndNeedReload)({extra:B,row:H,fieldName:R,more:r,oneTableCell:G,response:e})})).finally((function(){i&&i()}))):(console.warn("Missing configApi"),o&&o())},onClickFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ctc,o=e.customMore,n=e.canUpload,i=o||V;console.warn("onClickFiles:",i),d.f.showFromComponent((function(e){return Object(m.jsx)(Q,Object(a.a)(Object(a.a)({},e),{},{more:i,canUpload:n,ctc:t}))}),{title:"Modal",backdrop:"static",size:"xl",showHeader:!1,fnList:{updateCell:function(e,t){console.warn("Updatecell:",e,t)},fnGetApiPath:function(){return h.j.fnGetApiPath(N)},onChangeData:function(e){console.warn("onChangeData:",e,w),e&&w?e.Id===w.Id||w.hasOwnProperty&&e.hasOwnProperty&&w.hasOwnProperty("Photos")&&e.hasOwnProperty("Photos")?(l.HUtils.mergeObjIfExist(H[R],e),l.HUtils.runFuntion(G.fnList,"onUpdateRow",[{row:H,newRow:H}]),Y()):console.warn("Update data row, wrong ID",e,w):console.warn("Update data row, wrong data",e,w)}}})}}}},511:function(e,t,o){"use strict";var n=o(52);t.a=n.apiWithConfigApi}}]);
//# sourceMappingURL=116.163e3377.chunk.js.map