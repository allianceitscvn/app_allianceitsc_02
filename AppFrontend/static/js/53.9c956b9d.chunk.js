(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[53,106],{1258:function(e,o,n){"use strict";n.r(o),n.d(o,"default",(function(){return l}));var t=n(4),r=(n(0),n(701)),i=n(2);function l(e){return Object(i.jsx)(r.default,Object(t.a)(Object(t.a)({},e),{},{custom:{className:"mtc-checkbox_disabled",more:{cbNormal:{color:"#efefef",iconChar:"\f05e"},cbPositive:{color:"#c71c22",colorDisabled:"#bf2f34",iconChar:"\f05e"},configNegative:{color:"#efefef",iconChar:"\f05e"}}}}))}},510:function(e,o,n){"use strict";var t=n(32),r=n(13),i=n(31),l=n(4),a=n(1),c=n(57),s=n.n(c),f=n(0),u=n.n(f),d=n(11),b=n(9),p=n(511),m=n(155),h=n(157),g=n(79),v=n(2),C="fnGetScreenCode",y=function(e){var o=e.oneTableCell,n=Object(l.a)({},o.fnList);return n[b.O]=function(){var e=o.row,t=o.extra,r=o.extra.Type.source,i=b.j.getSourceList(n);if(h.e(r))return h.b(i,r,e,t.Type.sourceField);if(r&&r.startsWith("["))return a.HJson.getObj(r);if(r&&r.startsWith("f")){var l=r.slice(1,r.length);return null!=e[l]&&Array.isArray(e[l])?e[l]:null!=e[r]&&Array.isArray(e[r])?e[r]:[]}return i[r]||[]},n[b.T]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.customMore,t=e.count,r=e.tooltip,i=o.row,l=o.more;return j.renderBadge({more:n||l,row:i,count:t,tooltip:r})},n[b.H]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.customTitle;return m.a.Cell_GetHeaderTitle({extra:o.extra,customTitle:n})},n[b.u]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,t=o.more,r=n;return t&&t.hasOwnProperty(e)&&(r=t[e]),r},n[b.v]=function(){var e=o.row,n=o.extra,t=o.more;return m.a.Cell_GetConfigModal({extra:n,more:t,row:e})},n[b.I]=function(){var e=o.row,n=o.extra,t=o.more,r=o.getValue();if(!1===Object(g.FlowGetCanShow)({extra:n,row:e,more:t}))return!0;return!(!t[g.KMore.hideWhenEmpty]||""!==r&&null!=r&&0!==r)||(!(!t[g.KMore.hideWhenNull]||null!=r)||!!(a.MyTableCellHelpers.ConfigByTypes&&a.MyTableCellHelpers.ConfigByTypes[o.type]&&a.MyTableCellHelpers.ConfigByTypes[o.type].isHide&&a.MyTableCellHelpers.ConfigByTypes[o.type].isHide(o)))},n.onSendMsg=function(e){console.error("missing onSendMsg, need update fnList",e)},n.onReExpand=function(){var e=o.row;a.HUtils.runFuntion(e,"_fnForceUpdateDetail")},o.fnList=n,n},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a.HUtils.runFuntion(e.fnList,C,o)},j={renderBadge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.more,n=void 0===o?{}:o,t=e.row,r=void 0===t?{}:t,i=e.count,l=e.tooltip,c=n.configBadge||n.badge;if(null!=i||c&&!0===c.show){var s=i,f=l;if(c&&c.fCount&&null!=r[c.fCount]&&(s=r[c.fCount]),s)return c&&c.fTooltip&&r[c.fTooltip]&&(f=r[c.fTooltip]),f?Object(v.jsx)(d.k,{overlay:Object(v.jsx)(a.MyUI,{type:"html",html:f}),children:Object(v.jsx)("span",{className:"mct-ui-badge",children:s})}):Object(v.jsx)("span",{className:"mct-ui-badge",children:s})}}},O=n(156),x="fnRequestUpdate",F="fnRequestCustom";function M(e){var o=e.ctc,n=e.more,t=o.row.Id,r=w(o),i={};n&&(n.fID&&o.row[n.fID]&&(t=o.row[n.fID]),i=n.configFile||n.file||{});var c=Object(l.a)({needRequestPhotos:!0,pasteAsFile:!0,showUploadFromGGDrive:!1},i),s={ScreenCode:r,ProjectId:"",Id:t,FieldName:o.fieldName};return Object(v.jsx)("div",{children:Object(v.jsx)(a.MyUI,{type:"file_manager",requestData:s,fnList:e.fnList,configFile:c,canUpload:e.canUpload})})}var k=function(e){e.fieldName;var o=e.extra,n=e.row,t=o||{},r=e.more,l=!1;if("boolean"===typeof t.CanEdit&&(l=t.CanEdit),1==l)if(null==r.fCanEdit&&null!=r.canEditF&&(r.fCanEdit=r.canEditF),"boolean"===typeof r.fCanEdit)l=r.fCanEdit;else if("string"===typeof r.fCanEdit&&r.fCanEdit.length>0)if(null!=n[r.fCanEdit])l=n[r.fCanEdit];else if(r.fCanEdit.indexOf(",")>-1){var a=r.fCanEdit.split(",");if(a&&a.length>0){var c,s=Object(i.a)(a);try{for(s.s();!(c=s.n()).done;){if(0==n[c.value]){l=!1;break}}}catch(p){s.e(p)}finally{s.f()}}}if(null!=r.lockF||null!=r.fLock){var f=r.lockF||r.fLock;if("boolean"==typeof f)l=!f;else if("string"==typeof f&&f.length>0)if(null!=n[f])l=!n[f];else if(f.indexOf(",")>-1){var u=f.split(",");if(u&&u.length>0){var d,b=Object(i.a)(u);try{for(b.s();!(d=b.n()).done;){if(1==n[d.value]){l=!1;break}}}catch(p){b.e(p)}finally{b.f()}}}}return l};o.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.props;0;var n=Object(f.useState)(0),i=Object(r.a)(n,2),c=(i[0],i[1],Object(f.useState)(null===o.cell||void 0===o.cell?"":o.cell)),h=Object(r.a)(c,2),C=h[0],w=h[1],j=o.cell,T=o.extra,N=T.fieldName,P=Object(f.useState)(!1),E=Object(r.a)(P,2),S=E[0],D=E[1],U=Object(f.useState)(!1),A=Object(r.a)(U,2),H=A[0],L=A[1],R=u.a.useRef(new a.OneTableCell(o)),I=R.current;I.row=o.row,I.extra=T,o.custom&&!0!==I._updateCustom&&(I.more=Object(l.a)(Object(l.a)({},o.custom.more),I.more),I._updateCustom=!0);var B=I.row,G=u.a.useRef(y({oneTableCell:I,row:B,extra:T,cell:j})),q=G.current;null==I._onePage&&I.updateOnePage(b.j.fnGetOnePage(q));var V=I.more,W=Object(O.a)(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.cbWhenEqual,n=B[N];console.log("updateValueCellFromRow:",n),C!=n?w(null===n||void 0===n?"":n):(console.log("call cbWhenEqual"),o&&o())};return!0===B.IsLocked?I.canEdit=!1:null!=I.canEdit&&!0!==I.canEdit&&!1!==I.canEdit||(I.canEdit=k({extra:I.extra,more:V,row:B})),u.a.useEffect((function(){"string"===typeof o.cell||"number"===typeof o.cell||"boolean"===typeof o.cell?o.cell!=C&&w(o.cell):w(o.cell)}),[o.cell]),{forceUpdate:W,fnList:q,updateValueCellFromRow:_,oneTableCell:I,extra:I.extra,row:I.row,fieldName:I.fieldName,more:I.more,moreObj:I.more,canEdit:I.canEdit,updateFieldData:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.warn("updateFieldData:",e,I),e==j||null==j&&""==e?(console.warn("not update:",e,j,n),n&&n.cbError&&n.cbError({msg:"Nothing to change"})):(D(!0),a.HUtils.runFuntion(I.fnList,x,[Object(l.a)(Object(l.a)({},n),{},{apiController:b.j.fnGetApiPath(q),fieldName:n.fieldName||I.fieldName,row:I.row,newValue:e,cbSuccess:function(e){console.warn("cbss",e),D(!1),b.j.fnForceUpdateTable(q,[]),n&&n.cbSuccess&&n.cbSuccess(e),o.fnList&&o.fnList.cbSuccessUpdate&&o.fnList.cbSuccessUpdate()},cbError:function(o){console.warn("cber",o),D(!1),n&&n.cbError&&n.cbError(e)}})]))},requestCustom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("requestCustom:",e),a.HUtils.runFuntion(I.fnList,F,[Object(l.a)({},e)])},getSharedConfig:function(){return{}},getMoreAttrsFromCustomConfig:function(){return a.MyTableCellHelpers.ConfigByTypes&&a.MyTableCellHelpers.ConfigByTypes[I.type]&&a.MyTableCellHelpers.ConfigByTypes[I.type].moreAttrs?a.MyTableCellHelpers.ConfigByTypes[I.type].moreAttrs:{}},getMorePropsButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.defaultStyle,n={},t=o||{};return H&&(n.disabled=!0),V&&V.button&&V.button.style&&(t=Object(l.a)(Object(l.a)({},t),V.button.style)),t&&Object.keys(t).length>0&&(n.style=t),n},renderHide:function(){return Object(v.jsx)("div",{className:"disabled"})},isUpdating:S,setIsUpdating:function(e){D(e)},isFetching:H,setIsFetching:L,valueCell:C,setValueCell:w,classNameWrap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s()(e,Object(l.a)({disabled:!1===I.canEdit,"a-scrwhhover":null!=V.scrwhhover?V.scrwhhover:n.scrwhhover||!1,"styled-mini":V.styledMini},null!=o.custom&&null!=o.custom.className?Object(t.a)({},o.custom.className,!0):{}))},styleWrap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m.a.Cell_GetStyleCell({extra:T,more:V,row:B,defaultStyle:e,overideStyle:o})},onUpdateRow:function(e){a.HUtils.runFuntion(I.fnList,"onUpdateRow",[{row:B,newRow:e}])},getTextDisplaySelect:function(){var e="";if(V.fDisplay&&B[V.fDisplay]?e=B[V.fDisplay]:V.fShow&&B[V.fShow]&&(e=B[V.fShow]),""==e&&null!=C&&""!==C){var o=q.fnGetSourceData(),n=a.HOptions.getTextDisplayOfValueFromOptions(o,C);n&&(e=n)}return""==e&&(e=C||""),e},renderTopRight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(v.jsx)(a.MyTableCell,Object(l.a)(Object(l.a)({},o),{},{fnList:q,more:V,oneTableCell:I,type:"_barTopRight",moreBtns:e,moreConfig:n}))},renderLoadingOverlay:function(){return Object(v.jsx)("div",{className:"a-overlay-center",children:Object(v.jsx)(a.MyLoading,{type:"threedotsvertical",size:12})})},onClickForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.customMore,n=e.cbSuccess,t=e.customShowForm,r=o||V;console.warn("onClickForm:",r),L(!0),Object(g.FlowCheckApiShowModal)({extra:T,row:B,more:V,fnList:q,cb:function(e){var o=e.canShow;e.config;if(o){var i=I.getConfigForm({customMore:r}),c=B;if(r.fDefaultValues&&(c=B[r.fDefaultValues]?B[r.fDefaultValues]:{}),i){var s=a.MyFormControlHelpers.getConfigFormFromConfigV1(i,{defaultValues:c,fnList:Object(l.a)(Object(l.a)({},q),{},{onSubmitForm:function(e,o){var t=o.myForm;console.warn("onSubmitForm:",e);var i=I.getConfigApi({customMore:r});return new Promise((function(o,r){i?(i.query=Object.assign(i.query,e),Object(p.a)(i).then((function(e){console.warn("onClickBtn API rs",e),Object(g.FlowParseResponseAndNeedReload)({extra:T,row:B,fieldName:N,more:V,oneTableCell:I,response:e}),t.closeMyModal&&t.closeMyModal(),n&&n(e),o(e)})).catch((function(e){r(e)}))):(console.warn("Missing configApi"),r("Missing configApi"))}))}})}),f=I.getConfigModal({customMore:r});t?t(s,Object(l.a)({},f)):d.f.showFromMyForm(s,Object(l.a)({},f))}else console.error("Missing configForm:",i)}L(!1)}})},onClickApi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.customMore,n=(e.cbSuccess,e.cbError),t=e.cbBeforeRequest,r=e.cbAfterRequest,i=o||V;console.warn("onClickApi:",i);var l=I.getConfigApi({customMore:i});i.confirmMsg?d.f.showConfirm({title:i.titleConfirm||"Confirm",msg:i.confirmMsg,onClickOK:function(e){l?(t&&t(),Object(p.a)(l).then((function(e){console.warn("onClickBtn API rs",e),Object(g.FlowParseResponseAndNeedReload)({extra:T,row:B,fieldName:N,more:i,oneTableCell:I,response:e})})).finally((function(){r&&r()}))):console.warn("Missing configApi"),e&&e.hide&&e.hide()}}):l?(t&&t(),Object(p.a)(l).then((function(e){console.warn("onClickBtn API rs",e),Object(g.FlowParseResponseAndNeedReload)({extra:T,row:B,fieldName:N,more:i,oneTableCell:I,response:e})})).finally((function(){r&&r()}))):(console.warn("Missing configApi"),n&&n())},onClickFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.ctc,n=e.customMore,t=e.canUpload,r=n||V;console.warn("onClickFiles:",r),d.f.showFromComponent((function(e){return Object(v.jsx)(M,Object(l.a)(Object(l.a)({},e),{},{more:r,canUpload:t,ctc:o}))}),{title:"Modal",backdrop:"static",size:"xl",showHeader:!1,fnList:{updateCell:function(e,o){console.warn("Updatecell:",e,o)},fnGetApiPath:function(){return b.j.fnGetApiPath(q)},onChangeData:function(e){console.warn("onChangeData:",e,j),e&&j?e.Id===j.Id||j.hasOwnProperty&&e.hasOwnProperty&&j.hasOwnProperty("Photos")&&e.hasOwnProperty("Photos")?(a.HUtils.mergeObjIfExist(B[N],e),a.HUtils.runFuntion(I.fnList,"onUpdateRow",[{row:B,newRow:B}]),W()):console.warn("Update data row, wrong ID",e,j):console.warn("Update data row, wrong data",e,j)}}})}}}},511:function(e,o,n){"use strict";var t=n(52);o.a=t.apiWithConfigApi},701:function(e,o,n){"use strict";n.r(o),n.d(o,"default",(function(){return m}));var t,r,i=n(4),l=n(22),a=(n(0),n(510)),c=(n(155),n(1),n(20)),s=n(79),f=n(9),u=n(2),d=c.b.div(t||(t=Object(l.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  &.disabled > div > div {\n    cursor: auto;\n  }\n"]))),b=c.b.div(r||(r=Object(l.a)(['\n  display: inline-block;\n  position: relative;\n  display: block;\n  & > div {\n    min-height: 20px;\n    margin-bottom: 0;\n    font-weight: normal;\n    cursor: pointer;\n  }\n  & input[type="checkbox"] {\n    display: none;\n    position: absolute;\n    margin-left: -20px;\n  }\n  & input[type="checkbox"] + i:before {\n    content: "','";\n    position: relative;\n    color: ',';\n  }\n  &:hover input[type="checkbox"] + i:before {\n    color: ',';\n  }\n  & input[type="checkbox"]:checked + i:before {\n    content: "','";\n    color: ',';\n  }\n  & input[type="checkbox"]:disabled + i:before {\n    color: ',';\n  }\n  & input[type="checkbox"]:disabled:checked + i:before {\n    color: ',";\n  }\n"])),(function(e){return e.cbNormal&&e.cbNormal.iconChar?e.cbNormal.iconChar:"\f096"}),(function(e){return e.cbNormal&&e.cbNormal.color?e.cbNormal.color:"#999"}),(function(e){return e.cbPositive&&e.cbPositive.color?e.cbPositive.color:"#3db73d"}),(function(e){return e.cbPositive&&e.cbPositive.iconChar?e.cbPositive.iconChar:"\f046"}),(function(e){return e.cbPositive&&e.cbPositive.color?e.cbPositive.color:"#3db73d"}),(function(e){return e.cbNormal&&e.cbNormal.colorDisabled?e.cbNormal.colorDisabled:"#ddd"}),(function(e){return e.cbPositive&&e.cbPositive.colorDisabled?e.cbPositive.colorDisabled:"#228322"})),p=function(e,o,n,t){n&&n[t]&&(o[t]=n[t],n[t].fColor&&e[n[t].fColor]&&(o[t].color=e[n[t].fColor]),n[t].fColorDisabled&&e[n[t].fColorDisabled]&&(o[t].colorDisabled=e[n[t].fColorDisabled]))};function m(e){var o=Object(a.a)({props:e}),n=o.more,t=o.row;if(f.k.fnGetIsHide(o.fnList))return o.renderHide();var r=function(e,o){var n={};return p(e,n,o,s.KMore.cbNormal),p(e,n,o,s.KMore.cbPositive),n}(t,n);return Object(u.jsxs)(d,{className:o.classNameWrap("mtc-checkbox"),style:o.styleWrap(),children:[Object(u.jsx)(b,Object(i.a)(Object(i.a)({onClick:function(){console.warn("onClick:"),o.canEdit&&o.updateFieldData(!0!==o.valueCell)},title:Object(s.FlowGetTitleTooltipOfColumn)(Object(i.a)({},o))},r),{},{children:Object(u.jsxs)("div",{onClick:function(){},children:[Object(u.jsx)("input",{type:"checkbox",disabled:!o.canEdit,checked:!0===o.valueCell,onChange:function(){}}),Object(u.jsx)("i",{className:"fa fa-2x"})]})})),!0===o.isUpdating&&o.renderLoadingOverlay()]})}}}]);
//# sourceMappingURL=53.9c956b9d.chunk.js.map