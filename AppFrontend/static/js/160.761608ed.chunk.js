(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[160],{1308:function(t,e,r){"use strict";r.r(e);var a=r(16),o=r(17),s=r(18),n=r(19),i=function(t){Object(s.a)(r,t);var e=Object(n.a)(r);function r(t){var o;return Object(a.a)(this,r),(o=e.call(this,t))._myChartType=function(){return"ComboChart"},o._myDefaultOptionsChart=function(){return{title:"",vAxis:{title:""},hAxis:{title:""},seriesType:"bars",series:{1:{type:"line"}}}},o._myOptionsChart=function(){var t=o.props,e=(t.chartConfig,t.fnList,o.getChartConfigOptions()),r=o.getChartConfigMore(),a={title:"",vAxis:{title:r.titleV||"",minValue:null!=r.vMinValue?r.vMinValue:0},hAxis:{title:r.titleH||""},seriesType:"bars",series:{}};if(e)if("object"==typeof e)a=Object.assign(a,e);else if("string"==typeof e)try{var s=JSON.parse(e);a=Object.assign(a,s)}catch(n){console.warn("Parse Json chart Options error:",n)}return a},o.state={},o}return Object(o.a)(r,[{key:"render",value:function(){return this.renderChart()}}]),r}(r(525).a);i.propTypes={},i.defaultProps={},e.default=i},525:function(t,e,r){"use strict";var a,o=r(4),s=r(61),n=r(31),i=r(16),l=r(17),h=r(18),f=r(19),p=r(22),u=r(0),c=r.n(u),g=r(557),v=r(160),y=function(t,e){var r=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).configChart;if(t&&t._More)return t._More;if(t&&t.more){if("object"==typeof t.more)return t.more;if("string"==typeof t.more)try{return t._More=JSON.parse(t.more),t._More}catch(e){console.warn("Error parse chart config json",e)}}return{}}({configChart:e.configChart});return Object(v.getDataBySort)(t,r.sortByField,r.sortType,r.sortDataType)},d=r(20),C=r(2),m=d.b.div(a||(a=Object(p.a)(["\n  & > div {\n    overflow: auto;\n  }\n"]))),b="isEmptyIsRoot",O="fixDataAfterHeader",T=function(t){Object(h.a)(r,t);var e=Object(f.a)(r);function r(t){var a;return Object(i.a)(this,r),(a=e.call(this,t)).getChartConfigOptions=function(){var t,e=a.props,r=e.chartConfig,o=e.fnList,s=a.getChartConfigMore();if(s.extraDataField&&o.fnGetExtraDataTable){var n=o.fnGetExtraDataTable();n&&n.ChartOptions&&n.ChartOptions[s.extraDataField]&&(t=n.ChartOptions[s.extraDataField])}var i=r||{};if(i.options&&null==t&&(t=i.options),"object"==typeof t)return t;if("string"==typeof t)try{return i._Options=JSON.parse(t),i._Options}catch(l){console.warn("Error parse chart config json",l)}return{}},a.getSeperator=function(){var t=a.getChartConfigMore();return t.sepereator?t.sepereator:";"},a.getChartConfigMore=function(){var t=a.props,e=t.chartConfig,r=(t.fnList,e||{});if(r.more){if("object"==typeof r.more)return r.more;if("string"==typeof r.more)try{return r._More=JSON.parse(r.more),r._More}catch(o){console.warn("Error parse chart config json",o)}}return{}},a.getDefaultOptionsChart=function(){return{title:"Title Chart"}},a.getDataForChart=function(){var t=a.props,e=t.chartConfig,r=t.fnList,o=a.getChartConfigMore(),s=[];if(r)if(o.extraDataField){if(r.fnGetExtraDataTable){var n=r.fnGetExtraDataTable();if(n&&n.ChartData&&n.ChartData[o.extraDataField])return n.ChartData[o.extraDataField]}}else!1===o.hasFilter?r.fnGetDataTable&&(s=r.fnGetDataTable()):r.fnGetDataTableFilterd&&(s=r.fnGetDataTableFilterd());return s=y(s,{configChart:e})},a.getOptionsForChart=function(){var t=a.getDefaultOptionsChart(),e=a.getChartConfigMore();if(a._myDefaultOptionsChart&&(t=Object.assign(t,a._myDefaultOptionsChart()||{})),a._myOptionsChart&&(t=Object.assign(t,a._myOptionsChart()||{})),null!=t.hAxisTicksDate&&t.hAxisTicksDate.length>0){for(var r=[],o=t.hAxisTicksDate,s=0;s<o.length;s++){var n=o[s];"number"==typeof n?r.push(new Date(o[s])):"object"==typeof n&&n.v&&n.f&&r.push({v:new Date(n.v),f:n.f})}t.hAxis?t.hAxis.ticks=r:t.hAxis={format:"d-MMMyy",ticks:r}}return e&&e.colorsFollowTitle&&null==t.colors&&a._colorsFollowTitle&&a._colorsFollowTitle.length>0&&(t.colors=a._colorsFollowTitle),t},a.countfY=function(t){var e=t.dataTable,r=t.valueX,a=t.fX,o=t.fY,s=0;if(e)for(var n=[],i=0;i<e.length;i++){var l=e[i];l[a]==r&&null!=l[o]&&-1==n.indexOf(l[o])&&(s++,n.push(l[o]))}return s},a.sumfY=function(t){var e=t.dataTable,r=t.valueX,a=t.fX,o=t.fY,s=0;if(e)for(var n=0;n<e.length;n++){var i=e[n];i[a]==r&&null!=i[o]&&"number"==typeof i[o]&&(s+=i[o])}return s},a.buidRowDataForChart=function(t){var e=t.arrfX,r=t.dataTable,o=t.row,s=t.fX,i=t.fY,l=t.more,h=a.getSeperator(),f=(o[s]||"").toString();if(1==l.distinctX&&e.indexOf(f)>-1)return null;var p=[],u=s;if(s.startsWith("[org]"))try{if(null!=o[u=s.replace("[org]","")]){var c={};"object"==typeof o[u]?c=o[u]:"string"==typeof o[u]&&(c=JSON.parse(o[u])),c.v&&c.f&&p.push(c)}else{var g=JSON.parse(u);if(g.v&&g.f){var v=null!=g&&null!=g.v&&null!=o[g.v]?o[g.v]:"",y=null!=g&&null!=g.f&&null!=o[g.f]?o[g.f]:"";p.push({v:v,f:y})}}}catch(z){console.warn("Parser json more in Type error:",z),p.push("")}else if(s.startsWith("[date]")){var d=s.replace("[date]",""),C=null;d&&(C=o[d]),C=null==C?new Date:new Date(C),p.push(C)}else p.push(f);e.push(f);var m,O=i.split(h),T=Object(n.a)(O);try{for(T.s();!(m=T.n()).done;){var D=m.value;if(D.startsWith("[count]")){var j=a.countfY({dataTable:r,valueX:f,fX:s,fY:D.replace("[count]","")});p.push(j)}else if(D.startsWith("[sum]")){var F=a.sumfY({dataTable:r,valueX:f,fX:s,fY:D.replace("[sum]","")});p.push(F)}else if(D.startsWith("[num]")){var W=parseInt(D.replace("[num]",""));p.push(W)}else if(D.startsWith("[color]")){var _=D.replace("[color]","");_&&null!=o[_]&&(_=o[_]),p.push(_),a._colorsFollowTitle.length<O.length&&a._colorsFollowTitle.push(_)}else if(D.startsWith("[style]")){var w=D.replace("[style]","");w&&null!=o[w]&&(w=o[w]),p.push(w)}else if(D.startsWith("[annotation]")){var x=D.replace("[annotation]","");x=x&&null!=o[x]?o[x]:null,p.push(x)}else if(D.startsWith("[annotationText]")){var M=D.replace("[annotationText]","");M=M&&null!=o[M]?o[M]:null,p.push(M)}else if(D.startsWith("[date]")){var N=D.replace("[date]","");N&&(N=o[N]),N=null==N?new Date:new Date(N),p.push(N)}else if(D.startsWith("[tooltip]")){var A=D.replace("[tooltip]","");A&&null!=o[A]&&(A=o[A]),p.push(A)}else if(D.startsWith("[string]")){var S=D.replace("[string]","");S&&null!=o[S]&&(S=o[S]),p.push(S)}else if(D.startsWith("[org]")){var X=D.replace("[org]","");X&&null!=o[X]&&(X=o[X]),null!==X&&""!==X||!l[b]||(X="_root_"),p.push(X)}else if(D.startsWith("[tooltip_html]")){var Y=D.replace("[tooltip_html]","");Y&&null!=o[Y]&&(Y=o[Y]),p.push(Y)}else if(D.startsWith("[arr]")){var J=D.replace("[arr]",""),P=[];J&&o[J]&&(Array.isArray(o[J])?P=o[J]:"string"==typeof o[J]&&(P=o[J].split(h)));for(var E=0;E<P.length;E++){var G=P[E];if(null==G||Array.isArray(G)||"object"!=typeof G||(G=a.getArrayFieldsInMore(J)),G.startsWith("[style]"))p.push(G.replace("[style]",""));else if(G.startsWith("[color]")){var I=G.replace("[color]",""),k="";k=o&&o.hasOwnProperty(I)?o[I]:I,p.push(k),a._colorsFollowTitle.length<O.length+P.length-1&&a._colorsFollowTitle.push(k)}else if(G.startsWith("[annotation]")){var B=G.replace("[annotation]","");o&&o.hasOwnProperty(B)?p.push(o[B]):p.push(B)}else if(G.startsWith("[field]")){var L=G.replace("[field]","");o&&o.hasOwnProperty(L)?p.push(o[L]):p.push(L)}else isNaN(Number(G))?p.push(G):p.push(Number(G))}}else if(D.startsWith("{")&&D.endsWith("}"))try{var H=JSON.parse(D);H.fieldName?p.push(o[H.fieldName]):H.value&&p.push(H.value)}catch(z){console.error("parse json header chart error:",D)}else if("number"==typeof o[D])p.push(o[D]);else if("string"==typeof o[D]){var V=Number(o[D]);isNaN(V)?p.push(0):p.push(V)}else p.push(0)}}catch(q){T.e(q)}finally{T.f()}if(1==l.hasStyle){var R="";l.fStyle&&o[l.fStyle]?R=o[l.fStyle]:o.UI_GoogleChartStyle&&(R=o.UI_GoogleChartStyle),l.fColor&&o[l.fColor]&&(0==R.length?R="".concat(o[l.fColor]):R+=";color: ".concat(o[l.fColor])),p.push(R)}if(1==l.hasAnnotation){var U="";l.fAnnotation&&o[l.fAnnotation]&&(U=o[l.fAnnotation]),p.push(U)}return p},a.buidHeaderDataForChart=function(t){var e=t.dataTable,r=t.titleX,o=t.titleY,n=t.fX,i=t.fY,l=t.more,h=a.props,f=(h.chartConfig,h.fnList,a.getSeperator()),p=o.split(f),u=i.split(f),c=[];if(u.length==p.length)for(var g=0;g<u.length;g++){var v=u[g];if(v.startsWith("[color]")||v.startsWith("[style]"))c.push({role:"style"});else if(v.startsWith("[annotation]"))c.push({role:"annotation"});else if(v.startsWith("[annotationText]"))c.push({role:"annotationText"});else if(v.startsWith("[date]"))c.push({type:"date"});else if(v.startsWith("[tooltip]"))c.push({type:"string",role:"tooltip"});else if(v.startsWith("[tooltip_html]"))c.push({type:"string",role:"tooltip",p:{html:!0}});else if(v.startsWith("[arr]")&&p[g].startsWith("[arr]")){var y=[],d=p[g].replace("[arr]","");if(e&&e.length>0){var C=e[0],m=[];C[d]&&(Array.isArray(C[d])?m=C[d]:"string"==typeof C[d]&&(m=C[d].split(f)));for(var b=0;b<m.length;b++){var O=m[b];if(null==O||Array.isArray(O)||"object"!=typeof O||(O=a.getArrayTitleFieldsInMore(d)),O.startsWith("[color]")||O.startsWith("[style]")||O.startsWith("[c]"))y.push({role:"style"});else if(O.startsWith("[annotation]"))y.push({role:"annotation"});else if(O.startsWith("[field]")){var T=O.replace("[field]","");C&&C[T]?y.push(C[T]):y.push("")}else y.push(O)}}c=c.concat(y)}else if(v.startsWith("{")&&v.endsWith("}"))try{var D=JSON.parse(v);D.header&&c.push(D.header)}catch(M){console.error("parse json header chart error:",v)}else{var j=p[g];if(j.startsWith("[field]")){var F=j.replace("[field]",""),W="";if(e&&e.length>0){var _=e[0];_[F]&&(W=_[F])}c.push(W)}else c.push(j)}}else console.warn("Array fY and titleY not same size!!!",u.length,p.length);var w=r;n.startsWith("[date]")&&(w={type:"date"});var x=[w].concat(Object(s.a)(c));return 1==l.hasStyle&&x.push({role:"style"}),1==l.hasAnnotation&&x.push({role:"annotation"}),x},a.buildDataForChart=function(){var t=a.props,e=t.chartConfig,r=(t.fnList,e||{}),o=r.fX,n=r.fY,i=(r.titleX||o||"").toString(),l=r.titleY||n,h=a.getChartConfigMore(),f=[],p=[];if(n){if(f=a.getDataForChart(),1==h.showWithoutData||f&&f.length>0){var u=a.buidHeaderDataForChart({titleX:i,titleY:l,dataTable:f,fX:o,fY:n,more:h});p.push(u),h[O]&&(p=[].concat(Object(s.a)(p),Object(s.a)(h[O])));var c=[];if(f&&f.length>0)for(var g=0;g<f.length;g++){var v=f[g],y=a.buidRowDataForChart({arrfX:c,dataTable:f,row:v,fX:o,fY:n,more:h});y&&p.push(y)}}}else console.warn("Missing fX or fY");return console.log("_dataForChart",p),p},a.getStyle=function(){var t=a.props.style||{},e=a.getChartConfigMore();return e.style&&(t=Object.assign(t,e.style)),t},a.getArrayFieldsInMore=function(t){var e=a.getChartConfigMore();return e.arrByFieldName&&e.arrByFieldName[t]?e.arrByFieldName[t]:[]},a.getArrayTitleFieldsInMore=function(t){var e=a.getChartConfigMore();return e.arrTitleByFieldName&&e.arrTitleByFieldName[t]?e.arrTitleByFieldName[t]:[]},a.getClassName=function(){var t=a.props.className||"",e=a.getChartConfigMore();return e.className&&(t+=" ".concat(e.className)),t},a.getMorePropsFromMore=function(){var t=a.props.morePropsChart,e={},r=a.getChartConfigMore();return r.props&&(e=r.props),t&&t.graph_id&&r.prefixId&&(e.graph_id="".concat(r.prefixId,"_").concat(t.graph_id)),e},a.renderChart=function(){var t=a.props.morePropsChart,e="BarChart";a._myChartType&&(e=a._myChartType());var r=a.buildDataForChart(),s=a.getChartConfigMore();return console.warn("_dataForChart",r),r&&r.length>0?Object(C.jsx)(m,{className:"mch-container",style:s.styleContainer,children:Object(C.jsx)(g.a,Object(o.a)(Object(o.a)({chartType:e,data:r,style:a.getStyle(),className:a.getClassName(),options:a.getOptionsForChart(),graph_id:e},t),a.getMorePropsFromMore()),e)}):Object(C.jsx)("div",{className:"mch-container",style:s.styleContainerEmpty,children:s.textEmpty||"No Data for chart"})},a._renderContain=function(){},a.state={},a._colorsFollowTitle=[],a}return Object(l.a)(r,[{key:"render",value:function(){return Object(C.jsx)("div",{})}}]),r}(c.a.Component);T.defaultProps={};e.a=T}}]);
//# sourceMappingURL=160.761608ed.chunk.js.map