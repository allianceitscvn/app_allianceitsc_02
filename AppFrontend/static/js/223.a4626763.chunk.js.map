{"version":3,"sources":["modules/adminpanel/MyUI/Types/file_manager_item.js"],"names":["Wrap","styled","div","MUIFileManagerItem","props","data","fnList","configItem","canDelete","requestData","className","type","ratio","alt","FileName","src","FileUrl","loading","CanDelete","color","onClick","MyModal","showConfirm","title","msgHtml","colorBtnOK","titleBtnOK","onClickOK","cModal","console","warn","fnListModal","showLoadingModal","_fnList","apiGeneric","method","url","PhotoId","Id","then","r","Data","onAfterDeleteItem","hideLoadingModal","hideModal","catch","err","FileUrl_Download","HLink","openUrl","CreatedBy","HFormat","format","CreatedAt"],"mappings":"uPAOMA,EAAOC,IAAOC,IAAV,s/BAqDK,SAASC,EAAmBC,GACzC,IAAQC,EAAiBD,EAAjBC,KAAMC,EAAWF,EAAXE,OACRC,EAAaH,EAAMG,YAAc,GAE/BC,EAA2BD,EAA3BC,UAAWC,EAAgBF,EAAhBE,YAEnB,OACE,eAACT,EAAD,CAAMU,UAAU,wBAAhB,UACE,sBAAKA,UAAU,UAAf,UACE,cAAC,OAAD,CAAMC,KAAK,gBAAgBC,MAAO,EAAlC,SACE,qBAAKC,IAAKR,EAAKS,SAAUC,IAAKV,EAAKW,QAASC,QAAQ,WAErDT,IAAgC,IAAnBH,EAAKa,WACjB,qBAAKR,UAAU,WAAf,SACE,cAAC,IAAD,CACES,MAAM,SACNC,QAAS,WACPC,IAAQC,YAAY,CAClBC,MAAO,eACPC,QAAQ,4CAAD,OAA8CnB,EAAKS,SAAnD,QACPW,WAAY,SACZC,WAAY,SACZC,UAAW,SAAAC,GACTC,QAAQC,KAAK,eAAgBF,GAC7BG,IAAYC,iBAAiBJ,EAAOK,QAAS,IAC7CC,YAAW,CACTC,OAAQ,OACRC,IAAK,0BACL/B,KAAK,2BACAI,GADD,IAEF4B,QAAShC,EAAKiC,OAGfC,MAAK,SAAAC,GACJX,QAAQC,KAAK,KAAMU,EAAGA,EAAEC,MACpBnC,GAAUA,EAAOoC,mBACnBpC,EAAOoC,kBAAkBrC,EAAMmC,EAAEC,MAEnCV,IAAYY,iBAAiBf,EAAOK,QAAS,IAC7CF,IAAYa,UAAUhB,EAAOK,QAAS,OAEvCY,OAAM,SAAAC,GACLjB,QAAQC,KAAK,OAAQgB,GACrBf,IAAYY,iBAAiBf,EAAOK,QAAS,WA7BzD,SAmCE,mBAAGvB,UAAU,oBAINL,EAAK0C,kBAChB,qBAAKrC,UAAU,aAAf,SACE,cAAC,IAAD,CACES,MAAM,OACNC,QAAS,WACP4B,QAAMC,QAAQ5C,EAAK0C,iBAAkB,WAHzC,SAME,mBAAGrC,UAAU,+BAKrB,sBAAKA,UAAU,SAAf,UACE,mBAAGA,UAAU,iBACb,sBAAMa,MAAOlB,EAAKS,SAAlB,SAA6BT,EAAKS,cAEpC,sBAAKJ,UAAU,SAAf,UACE,mBAAGA,UAAU,eAAea,MAAO,eACnC,+BAAOlB,EAAK6C,eAEd,sBAAKxC,UAAU,SAAf,UACE,mBAAGA,UAAU,mBAAmBa,MAAO,eACvC,+BACG4B,UAAQC,OAAO/C,EAAKgD,UAAW,CAC9B1C,KAAM,OACNyC,OAAQ","file":"static/js/223.a4626763.chunk.js","sourcesContent":["import React from \"react\"\r\nimport { HFormat, MyUI, HLink } from \"@macashipo/mlib\"\r\nimport { MyModal } from \"src/core/components\"\r\nimport styled from \"styled-components\"\r\nimport apiGeneric from \"src/services/apiGeneric\"\r\nimport { Button } from \"reactstrap\"\r\nimport { fnListModal } from \"src/helpers/fnList\"\r\nconst Wrap = styled.div`\r\n  border: 1px solid #e9ecef;\r\n  padding: 1px;\r\n  overflow: hidden;\r\n  & .a-photo {\r\n    position: relative;\r\n    & img {\r\n      width: 100%;\r\n      height: 100%;\r\n      object-fit: cover;\r\n    }\r\n    & .a-delete {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      & button {\r\n        padding: 2px;\r\n        border-radius: 0px;\r\n        width: 24px;\r\n        height: 24px;\r\n      }\r\n    }\r\n    & .a-openlink {\r\n      position: absolute;\r\n      bottom: 0;\r\n      right: 0;\r\n      & button {\r\n        padding: 2px;\r\n        border-radius: 0px;\r\n        width: 24px;\r\n        height: 24px;\r\n      }\r\n    }\r\n  }\r\n  & > div.a-name,\r\n  & > div.a-info {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 2px;\r\n    & > i {\r\n      margin-right: 5px;\r\n      width: 14px;\r\n      text-align: center;\r\n    }\r\n    & > span {\r\n      font-size: 0.7rem;\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      color: #424f5e;\r\n    }\r\n  }\r\n`\r\nexport default function MUIFileManagerItem(props) {\r\n  const { data, fnList } = props\r\n  const configItem = props.configItem || {}\r\n\r\n  const { canDelete, requestData } = configItem\r\n  const showOpen = true\r\n  return (\r\n    <Wrap className=\"mui-file_manager_item\">\r\n      <div className=\"a-photo\">\r\n        <MyUI type=\"layout_square\" ratio={1}>\r\n          <img alt={data.FileName} src={data.FileUrl} loading=\"lazy\" />\r\n        </MyUI>\r\n        {canDelete && data.CanDelete === true && (\r\n          <div className=\"a-delete\">\r\n            <Button\r\n              color=\"danger\"\r\n              onClick={() => {\r\n                MyModal.showConfirm({\r\n                  title: \"Delete Photo\",\r\n                  msgHtml: `Are you sure you want to delete photo <b>${data.FileName}</b>`,\r\n                  colorBtnOK: \"danger\",\r\n                  titleBtnOK: \"Delete\",\r\n                  onClickOK: cModal => {\r\n                    console.warn(\"on ok delete\", cModal)\r\n                    fnListModal.showLoadingModal(cModal._fnList, [])\r\n                    apiGeneric({\r\n                      method: \"POST\",\r\n                      url: \"ProjectPhoto/DeleteFile\",\r\n                      data: {\r\n                        ...requestData,\r\n                        PhotoId: data.Id,\r\n                      },\r\n                    })\r\n                      .then(r => {\r\n                        console.warn(\"r:\", r, r.Data) //Data la data cua field files\r\n                        if (fnList && fnList.onAfterDeleteItem) {\r\n                          fnList.onAfterDeleteItem(data, r.Data)\r\n                        }\r\n                        fnListModal.hideLoadingModal(cModal._fnList, [])\r\n                        fnListModal.hideModal(cModal._fnList, [])\r\n                      })\r\n                      .catch(err => {\r\n                        console.warn(\"err:\", err)\r\n                        fnListModal.hideLoadingModal(cModal._fnList, [])\r\n                      })\r\n                  },\r\n                })\r\n              }}\r\n            >\r\n              <i className=\"fa fa-trash\" />\r\n            </Button>\r\n          </div>\r\n        )}\r\n        {showOpen && data.FileUrl_Download && (\r\n          <div className=\"a-openlink\">\r\n            <Button\r\n              color=\"info\"\r\n              onClick={() => {\r\n                HLink.openUrl(data.FileUrl_Download, \"_blank\")\r\n              }}\r\n            >\r\n              <i className=\"fa fa-external-link\" />\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"a-info\">\r\n        <i className=\"fa fa-file-o\" />\r\n        <span title={data.FileName}>{data.FileName}</span>\r\n      </div>\r\n      <div className=\"a-name\">\r\n        <i className=\"fa fa-user-o\" title={\"Created by\"} />\r\n        <span>{data.CreatedBy}</span>\r\n      </div>\r\n      <div className=\"a-info\">\r\n        <i className=\"fa fa-calendar-o\" title={\"Created at\"} />\r\n        <span>\r\n          {HFormat.format(data.CreatedAt, {\r\n            type: \"date\",\r\n            format: \"DD/MM/YYYY HH:mm\",\r\n          })}\r\n        </span>\r\n      </div>\r\n    </Wrap>\r\n  )\r\n}\r\n"],"sourceRoot":""}