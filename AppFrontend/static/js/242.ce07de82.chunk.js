(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[242],{1357:function(e,t,n){"use strict";n.r(t);var o,a=n(22),r=n(16),s=n(17),i=n(18),l=n(19),c=n(0),u=n(20),p=(n(88),n(1)),f=n(11),d=n(87),m=n(75),v=n.n(m),b={sendWebHook:function(e,t){t&&e&&e.startsWith("https://chat.googleapis.com")?v.a.post(e,{text:t}):console.warn("Cannot send gg chat!",e,t)}},g=n(2),h=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).requestNotify=function(){b.sendWebHook("https://chat.googleapis.com/v1/spaces/AAAANzIFHu0/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=NpKK5pi-PbIlT8eq4uJU7sRNabhRvpixW47XRf4vGcc","")},o.state={},o}return Object(s.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;console.log(this.props);var t=p.HUtils.runFuntion(this.props.fnList,"getCurrentProjectInfo");return Object(g.jsxs)(y,{children:[Object(g.jsx)(f.c,{configForm:{defaultValues:{release_date:(new Date).getTime(),pushnotify:!0},more:{},controls:[{label:"Enviroment",fieldName:"enviroment",type:"select_tag",more:{optionKey:"enviroments"}},{label:"Platform",fieldName:"platform",type:"select_tag",more:{optionKey:"platforms"}},{label:"Version",fieldName:"version",type:"text"},{label:"Date release",fieldName:"release_date",type:"date"},{label:"Link",fieldName:"link",type:"text"},{label:"Changelog",fieldName:"changelog",type:"textarea"},{label:"Push Notify",fieldName:"pushnotify",type:"checkbox"}]},fnList:{getSourceList:function(){return{enviroments:t.enviroments.map((function(e,t){return{Text:e,Value:e}}))||[],platforms:t.platforms.map((function(e,t){return{Text:e,Value:e}}))||[]}}},renderFooter:function(t){return Object(g.jsxs)("div",{className:"a-form-footer",children:[Object(g.jsx)(d.a,{onClick:function(){console.log(e.props),p.HUtils.runFuntion(e.props.fnList,"hideModal")},children:"Close"}),Object(g.jsx)(d.a,{color:"primary",onClick:function(){var n=t.getCurrentValues();console.log("OK",n);var o=!1;if(n.enviroment&&n.platform&&n.release_date){n.pushnotify&&(o=!0);var a="".concat(n.enviroment,"_").concat(n.platform,"_release_").concat(n.release_date);p.HUtils.runFuntion(e.props.fnList,"onUpdateProjectExtra",[{key:a,value:n,isUpdateValue:!0,cbSuccess:function(){console.log("Add success");var t="".concat(n.enviroment,"_").concat(n.platform,"_releases");p.HUtils.runFuntion(e.props.fnList,"getCurrentProjectExtra",[t,function(t){var a=[];t&&t.Value&&(a=p.HJson.getObj(t.Value)||[]),0==Array.isArray(a)&&(a=[]),a.unshift(n.release_date),console.log("add"),p.HUtils.runFuntion(e.props.fnList,"onUpdateProjectExtra",[{key:"".concat(n.enviroment,"_").concat(n.platform,"_releases"),value:p.HJson.getString(a),isUpdateValue:!0,cbSuccess:function(){console.log("Add success"),o&&e.requestNotify(n)}}])}])}}])}},children:"Add"})]})}}),Object(g.jsx)("button",{onClick:function(){e.requestNotify()},children:"Test"})]})}}]),n}(c.Component),y=u.b.div(o||(o=Object(a.a)(["\n  & form > .a-form-footer {\n    margin-top: 0.5rem;\n    display: flex;\n    justify-content: flex-end;\n    & button {\n      padding: 5px;\n      margin: 2px;\n    }\n  }\n"])));t.default=h}}]);
//# sourceMappingURL=242.ce07de82.chunk.js.map