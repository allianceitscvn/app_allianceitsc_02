(this["webpackJsonpapp-admin-v5"]=this["webpackJsonpapp-admin-v5"]||[]).push([[233],{1314:function(e,t,n){"use strict";n.r(t);var a,o=n(22),r=n(4),c=n(32),s=n(16),l=n(17),i=n(18),u=n(19),d=n(0),f=n(20),p=n(88),j=(n(547),n(1)),b=n(2),h="GGChat",m="Info",v="Note",O=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(e){var a,o;return Object(s.a)(this,n),(o=t.call(this,e)).requestGets=function(e,t){Object(p.a)({request:{method:"POST",path:"Project_Ext",name:"GetItemsWithKey"},data:{ProjectId:o._projectId,Key:e},successCallBack:function(e){console.warn("res:",e),t&&t(e)},errorCallBack:function(e){console.log(e)}})},o.requestUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=e.value,a=e.title,r=e.isUpdateValue,c=e.isUpdateTitle,s=(e.isUpdateBoth,e.cbSuccess),l=[];c&&l.push({FieldName:"Title",NewValue:a}),r&&l.push({FieldName:"Value",NewValue:n}),Object(p.a)({request:{method:"POST",path:"Project_Ext",name:"UpdateFields"},data:{Id:t,ProjectId:o._projectId,Values:l},successCallBack:function(e){s&&s(e)},errorCallBack:function(e){console.log(e)}})},o.updateValue=function(e,t,n){t!=o.state[n]&&o.requestUpdate({key:e,isUpdateValue:!0,value:t,cbSuccess:function(e){e&&e.Data&&o.setState(Object(c.a)({},n,e.Data.Value))}})},o.getProjectInfo=function(){return j.HUtils.runFuntion(o.props.fnList,"getCurrentProjectInfo",[])},o.renderControlInfo=function(e,t,n,a){return Object(b.jsx)(j.MyFormControl,{type:e,configFormControl:{label:t,fieldName:n},fnList:{getDefaultValues:function(){return a},onUpdateValue:function(e){var t=e.fieldName,n=e.newValue;console.log("onUpdate:",t,n),j.HUtils.runFuntion(o.props.fnList,"onUpdateProjectInfo",[{key:t,value:n,cbSuccess:function(){console.log("cb success")}}])}}})},o.state=(a={keysFetched:!1},Object(c.a)(a,h,""),Object(c.a)(a,m,{}),Object(c.a)(a,v,""),a),o._projectId=j.HUtils.runFuntion(e.fnList,"getCurrentProjectId",[]),o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.requestGets([h,m,v].join(","),(function(t){if(t.Data&&t.Data){for(var n={},a=0;a<t.Data.length;a++){var o=t.Data[a];o.Key==h||o.Key==v?n[o.Key]=o.Value:o.Key==m&&(n[o.Key]=j.HJson.getObj(o.Value))}e.setState(Object(r.a)({keysFetched:!0},n))}}))}},{key:"render",value:function(){var e=this,t=this.getProjectInfo();console.log("_projectInfo:",t);var n=Object(r.a)({},t);return Object(b.jsxs)(g,{children:[Object(b.jsxs)("div",{className:"a-group",children:[Object(b.jsx)("div",{className:"a-title",children:"Webhook - Google Chat Group"}),Object(b.jsx)("div",{children:Object(b.jsx)("input",{type:"text",className:"form-control",defaultValue:this.state[h],onBlur:function(t){e.updateValue(h,t.currentTarget.value,h)}})})]}),Object(b.jsxs)("div",{className:"a-group",children:[Object(b.jsx)("div",{className:"a-title",children:"Info"}),Object(b.jsxs)("div",{children:[this.renderControlInfo("arrtext","Enviroments","enviroments",n),this.renderControlInfo("arrtext","Platforms","platforms",n)]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:"Notes"}),Object(b.jsx)("textarea",{className:"form-control",placeholder:"Note",defaultValue:this.state[v],onBlur:function(t){e.updateValue(v,t.currentTarget.value,v)}})]})]})]})}}]),n}(d.Component),g=f.b.div(a||(a=Object(o.a)(["\n  padding: 1rem;\n  background: white;\n  & .a-group {\n    border: 1px solid #ebf1ff;\n    padding: 10px;\n    border-radius: 4px;\n    background: #f5fbff;\n    margin-bottom: 10px;\n    & .a-title {\n      font-size: 16px;\n      font-weight: bold;\n      margin-bottom: 10px;\n    }\n  }\n"])));t.default=O}}]);
//# sourceMappingURL=233.d08707c3.chunk.js.map