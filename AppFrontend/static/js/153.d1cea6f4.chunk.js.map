{"version":3,"sources":["modules/adminpanel/MyUI/Types/select_box_search.js","helpers/AText.js"],"names":["WrapSelect","styled","div","MUISelectBox","props","sourceData","valueSelected","onChange","React","useState","sourceDataFilterd","setSourceDataFilterd","textSearch","setTextSearch","textSearchDone","setTextSearchDone","refInputSearch","useRef","handlerSearch","useCallback","debounce","s","console","warn","length","_arrFilter","filter","v","i","_textFilter","Text_Filter","Text","AText","compareTextForSearch","searchKoDau","_listData","useEffect","inModal","current","focus","showSelectedOnFirstRow","sort","a","b","Value","className","type","ref","placeholder","i18next","t","value","ev","_s","currentTarget","style","padding","textAlign","map","classnames","selected","onClick","text","opts","indexOf","_textSearch","toLowerCase","_text","HText"],"mappings":"6QAQMA,EAAaC,IAAOC,IAAV,qnCAwDD,SAASC,EAAaC,GACnC,IAAQC,EAAwCD,EAAxCC,WAAYC,EAA4BF,EAA5BE,cAAeC,EAAaH,EAAbG,SACnC,EAAkDC,IAAMC,SAASJ,GAAjE,mBAAOK,EAAP,KAA0BC,EAA1B,KACA,EAAoCH,IAAMC,SAAS,IAAnD,mBAAOG,EAAP,KAAmBC,EAAnB,KACA,EAA4CL,IAAMC,SAAS,IAA3D,mBAAOK,EAAP,KAAuBC,EAAvB,KACMC,EAAiBR,IAAMS,SAEvBC,EAAgBV,IAAMW,YAC1BC,oBAAS,SAAAC,GAEP,GADAC,QAAQC,KAAK,UAAWF,GACpBhB,GAAcA,EAAWmB,OAAS,EAAG,CACvC,IAAIC,EAAapB,EAAWqB,QAAO,SAACC,EAAGC,GACrC,IAAIC,EAAcF,EAAEG,aAAeH,EAAEI,KACrC,QACEC,IAAMC,qBAAqBJ,EAAaR,EAAG,CAAEa,aAAa,OAM9DvB,EAAqBc,GACrBV,EAAkBM,MAEnB,KACH,IAEEc,EAAY9B,EAuBhB,OAtBIO,GAAcA,EAAWY,OAAS,IACpCW,EAAYzB,GAGdF,IAAM4B,WAAU,YAEQ,IAAlBhC,EAAMiC,SAEJrB,EAAesB,SAAWtB,EAAesB,QAAQC,OACnDvB,EAAesB,QAAQC,UAG1B,IAEiC,GAAhCnC,EAAMoC,wBAAkCL,GAC1CA,EAAUM,MAAK,SAAUC,EAAGC,GAC1B,OAAID,EAAEE,OAAStC,GACL,EAEH,KAIT,eAACN,EAAD,CAAY6C,UAAU,iBAAtB,UACE,sBAAKA,UAAU,WAAf,UACE,mBAAGA,UAAU,iBACb,uBACEC,KAAK,OACLC,IAAK/B,EACLgC,YAAaC,IAAQC,EAAE,aAEvBC,MAAOvC,EACPL,SAAU,SAAA6C,GACR,IAAIC,EAAKD,EAAGE,cAAcH,MAC1BtC,EAAcwC,GACdnC,EAAcmC,SAIpB,sBAAKR,UAAU,SAAf,UACGjC,GAAcA,EAAWY,OAAS,GAA0B,IAArBW,EAAUX,QAChD,qBAAK+B,MAAO,CAAEC,QAAS,OAAQC,UAAW,UAA1C,SACG3C,IAAmBF,EAClB,8BAAMqC,IAAQC,EAAE,qBAEhB,8BAAMD,IAAQC,EAAE,oBAIrBf,GACCA,EAAUuB,KAAI,SAAC/B,EAAGC,GAChB,OACE,qBAEEiB,UAAWc,IAAW,SAAU,CAC9BC,SAAUjC,EAAEiB,OAAStC,IAEvBuD,QAAS,WACHtD,GACFA,EAASoB,IAPf,SAWGA,EAAEI,MAVEH,MAcE,IAAdhB,GAAoBuB,GAAkC,IAArBA,EAAUX,QAC1C,qBAAKqB,UAAU,cAAf,gC,iCC/JV,WACMb,EAAQ,CAEZC,qBAFY,WAE4C,IAAnC6B,EAAkC,uDAA3B,GAAIlD,EAAuB,uDAAV,GAAImD,EAAM,uCACrD,GAAInD,EAAWoD,QAAQ,MAAQ,GAAKpD,EAAWoD,QAAQ,MAAQ,EAAG,CAChE,IAAIC,EAAcrD,EAAWsD,cACzBC,EAAQL,EAAKI,cACjB,OAAIC,EAAMH,QAAQC,IAAgB,EAMpC,OAAOG,QAAMnC,qBAAqB6B,EAAMlD,EAAYmD,KAIzC/B","file":"static/js/153.d1cea6f4.chunk.js","sourcesContent":["import React from \"react\"\r\nimport classnames from \"classnames\"\r\nimport styled from \"styled-components\"\r\nimport { debounce } from \"lodash\"\r\nimport { HText } from \"@macashipo/mlib\"\r\nimport i18next from \"i18next\"\r\nimport AText from \"src/helpers/AText\"\r\n\r\nconst WrapSelect = styled.div`\r\n  max-height: inherit;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  & .a-list {\r\n    border: 1px solid #e9ecef;\r\n    border-radius: 4px;\r\n    overflow: auto;\r\n  }\r\n  & .option {\r\n    color: #575757;\r\n    min-height: 30px;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0.5rem 1rem;\r\n    cursor: pointer;\r\n    border-bottom: 1px solid #e9ecef;\r\n  }\r\n  & .option:hover {\r\n    color: #546c84;\r\n    background-color: #fbfbfb;\r\n  }\r\n  & .option.selected {\r\n    background: #10467a;\r\n    color: white;\r\n  }\r\n  & .a-search {\r\n    & i {\r\n      position: absolute;\r\n      left: 10px;\r\n      top: 11px;\r\n    }\r\n    & input {\r\n      width: 100%;\r\n      border: 1px solid #e9ecef;\r\n      height: 35px;\r\n      padding: 0rem;\r\n      padding-left: 28px;\r\n      border-radius: 4px;\r\n      margin-bottom: 0.5rem;\r\n      &:focus {\r\n        outline: 0;\r\n        background: var(--color-bg-focus);\r\n      }\r\n    }\r\n  }\r\n  & .a-nooptions {\r\n    min-height: 100px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    color: var(--warning);\r\n  }\r\n`\r\nexport default function MUISelectBox(props) {\r\n  const { sourceData, valueSelected, onChange } = props\r\n  const [sourceDataFilterd, setSourceDataFilterd] = React.useState(sourceData)\r\n  const [textSearch, setTextSearch] = React.useState(\"\")\r\n  const [textSearchDone, setTextSearchDone] = React.useState(\"\")\r\n  const refInputSearch = React.useRef()\r\n  // console.warn(\"MUISelectBox:\", sourceData, valueSelected)\r\n  const handlerSearch = React.useCallback(\r\n    debounce(s => {\r\n      console.warn(\"search:\", s)\r\n      if (sourceData && sourceData.length > 0) {\r\n        let _arrFilter = sourceData.filter((v, i) => {\r\n          let _textFilter = v.Text_Filter || v.Text\r\n          if (\r\n            AText.compareTextForSearch(_textFilter, s, { searchKoDau: true })\r\n          ) {\r\n            return true\r\n          }\r\n          return false\r\n        })\r\n        setSourceDataFilterd(_arrFilter)\r\n        setTextSearchDone(s)\r\n      }\r\n    }, 300),\r\n    []\r\n  )\r\n  let _listData = sourceData\r\n  if (textSearch && textSearch.length > 0) {\r\n    _listData = sourceDataFilterd\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    //auto focus inModal\r\n    if (props.inModal === true) {\r\n      // console.warn(\"in modal\", refInputSearch.current)\r\n      if (refInputSearch.current && refInputSearch.current.focus) {\r\n        refInputSearch.current.focus()\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  if (props.showSelectedOnFirstRow == true && _listData) {\r\n    _listData.sort(function (a, b) {\r\n      if (a.Value == valueSelected) {\r\n        return -1\r\n      }\r\n      return 0\r\n    })\r\n  }\r\n  return (\r\n    <WrapSelect className=\"mui-select_box\">\r\n      <div className=\"a-search\">\r\n        <i className=\"fa fa-search\" />\r\n        <input\r\n          type=\"text\"\r\n          ref={refInputSearch}\r\n          placeholder={i18next.t(\"Search...\")}\r\n          // autoFocus\r\n          value={textSearch}\r\n          onChange={ev => {\r\n            let _s = ev.currentTarget.value\r\n            setTextSearch(_s)\r\n            handlerSearch(_s)\r\n          }}\r\n        />\r\n      </div>\r\n      <div className=\"a-list\">\r\n        {textSearch && textSearch.length > 0 && _listData.length === 0 && (\r\n          <div style={{ padding: \"1rem\", textAlign: \"center\" }}>\r\n            {textSearchDone === textSearch ? (\r\n              <div>{i18next.t(\"No result found\")}</div>\r\n            ) : (\r\n              <div>{i18next.t(\"Searching...\")}</div>\r\n            )}\r\n          </div>\r\n        )}\r\n        {_listData &&\r\n          _listData.map((v, i) => {\r\n            return (\r\n              <div\r\n                key={i}\r\n                className={classnames(\"option\", {\r\n                  selected: v.Value == valueSelected,\r\n                })}\r\n                onClick={() => {\r\n                  if (onChange) {\r\n                    onChange(v)\r\n                  }\r\n                }}\r\n              >\r\n                {v.Text}\r\n              </div>\r\n            )\r\n          })}\r\n        {textSearch == \"\" && _listData && _listData.length === 0 && (\r\n          <div className=\"a-nooptions\">No options</div>\r\n        )}\r\n      </div>\r\n    </WrapSelect>\r\n  )\r\n}\r\n","import { HText } from \"@macashipo/mlib\"\r\nconst AText = {\r\n  //bo sung compareTextForSearch, truong hop search ki tu []\r\n  compareTextForSearch(text = \"\", textSearch = \"\", opts) {\r\n    if (textSearch.indexOf(\"[\") > -1 || textSearch.indexOf(\"]\") > -1) {\r\n      let _textSearch = textSearch.toLowerCase()\r\n      let _text = text.toLowerCase()\r\n      if (_text.indexOf(_textSearch) > -1) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    return HText.compareTextForSearch(text, textSearch, opts)\r\n  },\r\n}\r\n\r\nexport default AText\r\n"],"sourceRoot":""}